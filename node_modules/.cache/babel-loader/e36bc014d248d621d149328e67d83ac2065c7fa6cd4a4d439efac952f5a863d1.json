{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import RegionSelector from'./RegionSelector';import{searchBooksAPI,checkApiApprovalStatus}from'../services/LibraryAPI';// Ïä§ÌÉÄÏùºÎìú Ïª¥Ìè¨ÎÑåÌä∏ Ï†ïÏùò\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n`;const SearchForm=styled.form`\n  display: flex;\n  gap: 15px;\n  margin-bottom: 25px;\n  flex-wrap: wrap;\n`;const SearchInputContainer=styled.div`\n  position: relative;\n  flex: 1;\n  min-width: 300px;\n`;const SearchInput=styled.input`\n  width: 100%;\n  padding: 15px 20px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 18px;\n  outline: none;\n  transition: border-color 0.3s;\n  \n  &:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n  }\n  \n  &::placeholder {\n    color: #666;\n    font-size: 16px;\n  }\n`;const AutocompleteDropdown=styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 1000;\n  margin-top: 4px;\n`;const AutocompleteItemElement=styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  border-bottom: 1px solid #f0f0f0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 16px;\n  \n  &:hover {\n    background: #f8f9fa;\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  .icon {\n    color: #666;\n    font-size: 14px;\n  }\n  \n  .text {\n    flex: 1;\n  }\n  \n  .category {\n    color: #999;\n    font-size: 12px;\n  }\n`;const SearchButton=styled.button`\n  padding: 15px 30px;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  white-space: nowrap;\n  \n  &:hover {\n    background: #45a049;\n    transform: translateY(-2px);\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;const LoadingDiv=styled.div`\n  text-align: center;\n  padding: 40px;\n  font-size: 18px;\n  color: #666;\n  background: white;\n  border-radius: 8px;\n  margin: 20px 0;\n`;const EmptyState=styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  background: white;\n  border-radius: 8px;\n  margin: 20px 0;\n  \n  .emoji {\n    font-size: 48px;\n    margin-bottom: 20px;\n  }\n  \n  .title {\n    font-size: 24px;\n    font-weight: 600;\n    color: #333;\n    margin-bottom: 10px;\n  }\n  \n  .subtitle {\n    font-size: 16px;\n    color: #666;\n  }\n`;const SearchResults=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;const BookCard=styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 25px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e0e0e0;\n  transition: transform 0.3s, box-shadow 0.3s;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n  }\n`;const BookTitle=styled.h3`\n  margin: 0;\n  color: #333;\n  font-size: 20px;\n  font-weight: 600;\n  line-height: 1.4;\n  flex: 1;\n`;const BookInfo=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 15px;\n  \n  span {\n    color: #666;\n    font-size: 14px;\n  }\n`;const BookDescription=styled.p`\n  color: #555;\n  font-size: 14px;\n  line-height: 1.5;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #f8f9fa;\n  border-radius: 8px;\n`;const AvailabilitySection=styled.div`\n  border-top: 1px solid #e0e0e0;\n  padding-top: 20px;\n`;const AvailabilityTitle=styled.h4`\n  margin: 0 0 15px 0;\n  color: #333;\n  font-size: 16px;\n  font-weight: 600;\n`;const LibraryList=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;const LibraryItem=styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  background: #fafafa;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n`;const LibraryHeader=styled.div`\n  flex: 1;\n  margin-bottom: 10px;\n`;const LibraryName=styled.h4`\n  margin: 0 0 4px 0;\n  color: #333;\n  font-size: 18px;\n  font-weight: 600;\n`;const LibraryAddress=styled.p`\n  margin: 0 0 4px 0;\n  color: #666;\n  font-size: 14px;\n`;const LibraryPhone=styled.p`\n  margin: 0 0 4px 0;\n  color: #4CAF50;\n  font-size: 14px;\n  font-weight: 600;\n`;const LibraryHours=styled.p`\n  margin: 0 0 4px 0;\n  color: #666;\n  font-size: 12px;\n`;const LibraryStats=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-bottom: 15px;\n  padding: 10px 0;\n  border-top: 1px solid #eee;\n  border-bottom: 1px solid #eee;\n`;// ActionButtons Ïä§ÌÉÄÏùºÎìú Ïª¥Ìè¨ÎÑåÌä∏ Ï†úÍ±∞ (ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå)\nconst ReserveButton=styled.button`\n  padding: 8px 15px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  white-space: nowrap;\n  \n  background: ${props=>props.available?'#4CAF50':'#ff9800'};\n  color: white;\n  \n  &:hover:not(:disabled) {\n    background: ${props=>props.available?'#45a049':'#f57c00'};\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n`;const ApiStatus=styled.div`\n  padding: 12px 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  font-size: 14px;\n  font-weight: 600;\n  \n  background: ${props=>props.isError?'#ffebee':'#e8f5e8'};\n  color: ${props=>props.isError?'#c62828':'#2e7d32'};\n  border: 1px solid ${props=>props.isError?'#ffcdd2':'#c8e6c9'};\n`;// Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†ïÏùò\nconst BookSearchSection=_ref=>{let{externalSearchQuery,onExternalSearchComplete,selectedRegion:parentSelectedRegion,onRegionUpdate}=_ref;const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[loading,setLoading]=useState(false);const[hasSearched,setHasSearched]=useState(false);const[selectedRegion,setSelectedRegion]=useState(parentSelectedRegion||'');const[libraries,setLibraries]=useState([]);const[apiStatus,setApiStatus]=useState('');const[apiError,setApiError]=useState('');// ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ ÏÉÅÌÉú\nconst[recentSearches,setRecentSearches]=useState([]);// ÏûêÎèôÏôÑÏÑ± ÏÉÅÌÉú\nconst[showAutocomplete,setShowAutocomplete]=useState(false);const[autocompleteItems,setAutocompleteItems]=useState([]);// Ï¶êÍ≤®Ï∞æÍ∏∞ ÏÉÅÌÉú\nconst[bookmarks,setBookmarks]=useState([]);// Ïù∏Í∏∞ Í≤ÄÏÉâÏñ¥ Î™©Î°ù\nconst popularSearches=[{text:'Îã¨Í≥º 6ÌéúÏä§',category:'Î¨∏Ìïô'},{text:'ÎØ∏ÏõÄÎ∞õÏùÑ Ïö©Í∏∞',category:'ÏûêÍ∏∞Í≥ÑÎ∞ú'},{text:'ÏàòÌïôÏùò Ï†ïÏÑù',category:'ÍµêÏú°'},{text:'82ÎÖÑÏÉù ÍπÄÏßÄÏòÅ',category:'ÏÜåÏÑ§'},{text:'ÏõêÏîΩ',category:'ÏûêÍ∏∞Í≥ÑÎ∞ú'},{text:'ÏÑ∏Í≥ÑÏÇ¨ Ìé∏ÏßÄ',category:'Ïó≠ÏÇ¨'},{text:'ÏΩîÏä§Î™®Ïä§',category:'Í≥ºÌïô'},{text:'ÏûëÎ≥ÑÌïòÏßÄ ÏïäÎäîÎã§',category:'ÏÜåÏÑ§'},{text:'ÏïÑÌîÑÎãàÍπå Ï≤≠Ï∂òÏù¥Îã§',category:'ÏóêÏÑ∏Ïù¥'},{text:'Î∂àÌé∏Ìïú Ìé∏ÏùòÏ†ê',category:'ÏÜåÏÑ§'},{text:'ÏïÑÎ™¨Îìú',category:'ÏÜåÏÑ§'},{text:'ÎãπÏã†Ïù¥ Ïò≥Îã§',category:'ÏóêÏÑ∏Ïù¥'},{text:'ÏÇ¨ÌîºÏóîÏä§',category:'Ïù∏Î¨∏'},{text:'Îç∞ÎØ∏Ïïà',category:'Î¨∏Ìïô'},{text:'Ïñ¥Î¶∞ÏôïÏûê',category:'Î¨∏Ìïô'}];// ÏûêÎèôÏôÑÏÑ± Í∏∞Îä•\nconst updateAutocomplete=inputValue=>{if(!inputValue.trim()){const items=[...recentSearches.slice(0,5).map(search=>({text:search,category:'ÏµúÍ∑º Í≤ÄÏÉâ',type:'recent'})),...popularSearches.slice(0,5).map(search=>({text:search.text,category:search.category,type:'popular'}))];setAutocompleteItems(items);setShowAutocomplete(true);return;}const searchValue=inputValue.toLowerCase();const matchedItems=[];recentSearches.forEach(search=>{if(search.toLowerCase().includes(searchValue)){matchedItems.push({text:search,category:'ÏµúÍ∑º Í≤ÄÏÉâ',type:'recent'});}});popularSearches.forEach(search=>{if(search.text.toLowerCase().includes(searchValue)){matchedItems.push({text:search.text,category:search.category,type:'popular'});}});setAutocompleteItems(matchedItems.slice(0,10));setShowAutocomplete(matchedItems.length>0);};// ÏûêÎèôÏôÑÏÑ± ÏïÑÏù¥ÌÖú ÏÑ†ÌÉù Ï≤òÎ¶¨\nconst handleAutocompleteSelect=item=>{setSearchTerm(item.text);setShowAutocomplete(false);saveRecentSearch(item.text);performSearch(item.text);};// Í≤ÄÏÉâ ÏûÖÎ†• Ï≤òÎ¶¨\nconst handleSearchInputChange=e=>{const value=e.target.value;setSearchTerm(value);setTimeout(()=>{updateAutocomplete(value);},300);};// Í≤ÄÏÉâ ÏûÖÎ†• Ìè¨Ïª§Ïä§ Ï≤òÎ¶¨\nconst handleSearchInputFocus=()=>{updateAutocomplete(searchTerm);};// ÏûêÎèôÏôÑÏÑ± Îã´Í∏∞\nconst handleAutocompleteClose=()=>{setTimeout(()=>setShowAutocomplete(false),150);};// Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ Î∞è Ï¶êÍ≤®Ï∞æÍ∏∞ Î∂àÎü¨Ïò§Í∏∞\nuseEffect(()=>{const savedSearches=localStorage.getItem('recentSearches');if(savedSearches){setRecentSearches(JSON.parse(savedSearches));}const savedBookmarks=localStorage.getItem('bookmarks');if(savedBookmarks){setBookmarks(JSON.parse(savedBookmarks));}},[]);// ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ Ï†ÄÏû•\nconst saveRecentSearch=query=>{const updated=[query,...recentSearches.filter(s=>s!==query)].slice(0,10);setRecentSearches(updated);localStorage.setItem('recentSearches',JSON.stringify(updated));};// Ï¶êÍ≤®Ï∞æÍ∏∞ ÌÜ†Í∏Ä\nconst toggleBookmark=bookId=>{let updated;if(bookmarks.includes(bookId)){updated=bookmarks.filter(id=>id!==bookId);}else{updated=[...bookmarks,bookId];}setBookmarks(updated);localStorage.setItem('bookmarks',JSON.stringify(updated));};// Ï¶êÍ≤®Ï∞æÍ∏∞ Ïó¨Î∂Ä ÌôïÏù∏\nconst isBookmarked=bookId=>bookmarks.includes(bookId);// API ÏäπÏù∏ ÏÉÅÌÉú ÌôïÏù∏\nuseEffect(()=>{const checkApprovalStatus=async()=>{try{const isApproved=await checkApiApprovalStatus('651824a6d5a5d765b513f7f8059ef5ffb2ac3c30f15f0114a8764076c8b902b8');if(isApproved){setApiStatus('‚úÖ Ïã§ÏãúÍ∞Ñ ÎèÑÏÑúÍ¥Ä API Ïó∞Í≤∞Îê®');}else{setApiStatus('‚ö†Ô∏è API ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ë - ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ');}}catch(error){setApiStatus('‚ö†Ô∏è API Ïó∞Í≤∞ ÌôïÏù∏ Ï§ë - ÏïàÏ†ïÏ†ÅÏù∏ ÏÑúÎπÑÏä§ Ï†úÍ≥µ');}};checkApprovalStatus();},[]);// ÏßÄÏó≠Î≥Ñ ÎèÑÏÑúÍ¥Ä ÏÉùÏÑ±\nconst generateLibrariesByRegion=region=>{const regionLower=region.toLowerCase();// Îèô Îã®ÏúÑ ÏßÄÏó≠ Ï≤òÎ¶¨\nif(regionLower.includes('Îèô')){const cityName=region.replace('Îèô','');return[{id:1,name:`${cityName}Îèô Ï£ºÎØºÏÑºÌÑ∞ ÎèÑÏÑúÍ¥Ä`,address:`Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Ï§ëÏïôÎ°ú 123`,phone:'031-123-4567',hours:'09:00-18:00'},{id:2,name:`${cityName}Îèô Íµ¨ÎØºÌöåÍ¥Ä ÎèÑÏÑúÍ¥Ä`,address:`Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Î≥µÌï©Î¨∏ÌôîÏÑºÌÑ∞ 2Ï∏µ`,phone:'031-234-5678',hours:'10:00-20:00'},{id:3,name:`${cityName}Îèô ÏûëÏùÄÎèÑÏÑúÍ¥Ä`,address:`Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Ï£ºÌÉùÍ∞Ä ÎÇ¥ ÏûëÏùÄÎèÑÏÑúÍ¥Ä`,phone:'031-345-6789',hours:'10:00-18:00'}];}// Ïãú Îã®ÏúÑ ÏßÄÏó≠Î≥Ñ ÎèÑÏÑúÍ¥Ä Îç∞Ïù¥ÌÑ∞\nconst libraryData={'ÏàòÏõê':[{id:1,name:'ÏàòÏõêÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ Í¥ëÍµêÎ°ú 183',phone:'031-228-4300',hours:'09:00-22:00'},{id:2,name:'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏõîÎìúÏªµÎ°ú 235',phone:'031-249-4800',hours:'09:00-18:00'},{id:3,name:'ÏòÅÌÜµÍµ¨Î¶ΩÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏòÅÌÜµÎèô 999-1',phone:'031-228-4350',hours:'09:00-20:00'}],'ÏÑ±ÎÇ®':[{id:1,name:'ÏÑ±ÎÇ®ÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ ÏñëÌòÑÎ°ú 346',phone:'031-729-4600',hours:'09:00-18:00'},{id:2,name:'Î∂ÑÎãπÍµ¨Î¶ΩÏ†ïÏûêÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ Ï†ïÏûêÎèô 178-1',phone:'031-729-4650',hours:'09:00-20:00'},{id:3,name:'ÏÑúÌòÑÏûëÏùÄÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ ÏÑúÌòÑÎèô 271-3',phone:'031-729-4670',hours:'10:00-18:00'}],'Í≥†Ïñë':[{id:1,name:'Í≥†ÏñëÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÎçïÏñëÍµ¨ Í≥†ÏñëÎåÄÎ°ú 1955',phone:'031-8075-9300',hours:'09:00-18:00'},{id:2,name:'ÏùºÏÇ∞ÎèôÍµ¨Î¶ΩÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÏùºÏÇ∞ÎèôÍµ¨ Î∞±ÏÑùÎèô 1256',phone:'031-8075-9350',hours:'09:00-20:00'},{id:3,name:'Î∞±ÏÑùÏûëÏùÄÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÏùºÏÇ∞ÎèôÍµ¨ Î∞±ÏÑùÎèô 1234-5',phone:'031-8075-9380',hours:'10:00-18:00'}],'Î∂ÄÏ≤ú':[{id:1,name:'Î∂ÄÏ≤úÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ Í∏∏Ï£ºÎ°ú 1',phone:'032-320-3901',hours:'09:00-18:00'},{id:2,name:'Î∂ÄÏ≤úÏãúÎ¶ΩÏõêÎØ∏ÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ Ï§ëÎèôÎ°ú 7',phone:'032-320-3902',hours:'09:00-20:00'},{id:3,name:'Î∂ÄÏ≤úÏãúÎ¶ΩÏÉÅÎèôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ ÏÉÅÎèôÎ°ú 92',phone:'032-320-3903',hours:'10:00-18:00'}],'ÏïàÏñë':[{id:1,name:'ÏïàÏñëÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎßåÏïàÍµ¨ Î¨∏ÏòàÎ°ú 86',phone:'031-8045-2600',hours:'09:00-18:00'},{id:2,name:'ÏïàÏñëÏãúÎ¶ΩÏÑùÏàòÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎßåÏïàÍµ¨ ÏÑùÏàòÎ°ú 80',phone:'031-8045-2650',hours:'09:00-20:00'},{id:3,name:'ÏïàÏñëÏãúÎ¶ΩÌò∏Í≥ÑÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎèôÏïàÍµ¨ Ìò∏Í≥ÑÎ°ú 103',phone:'031-8045-2700',hours:'10:00-18:00'}],'Ïö©Ïù∏':[{id:1,name:'Ïö©Ïù∏ÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Ï≤òÏù∏Íµ¨ Ï§ëÎ∂ÄÎåÄÎ°ú 1199',phone:'031-324-4600',hours:'09:00-18:00'},{id:2,name:'Í∏∞Ìù•ÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Í∏∞Ìù•Íµ¨ Í∏∞Ìù•Î°ú 19',phone:'031-324-4650',hours:'09:00-20:00'},{id:3,name:'ÏàòÏßÄÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú ÏàòÏßÄÍµ¨ Ìè¨ÏùÄÎåÄÎ°ú 435',phone:'031-324-4700',hours:'10:00-18:00'},{id:4,name:'ÏÑúÎÜçÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Í∏∞Ìù•Íµ¨ ÏÑúÏ≤úÏÑúÎ°ú 83',phone:'031-324-4680',hours:'09:00-18:00'}]};// Ï†ïÌôïÌïú ÏßÄÏó≠Î™Ö Îß§Ïπ≠ (Ïãú Ïù¥Î¶Ñ Ï∂îÏ∂ú)\nfor(const[key,data]of Object.entries(libraryData)){if(regionLower.includes(key)){return data;}}// Í∏∞Î≥∏Í∞í: Í≤ΩÍ∏∞ÎèÑ ÎåÄÌëú ÎèÑÏÑúÍ¥ÄÎì§\nreturn[{id:1,name:'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏõîÎìúÏªµÎ°ú 235',phone:'031-249-4800',hours:'09:00-18:00'},{id:2,name:'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÍ≥ºÏ≤úÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ Í≥ºÏ≤úÏãú Î≥ÑÏñëÏÉÅÍ∞Ä2Î°ú 84',phone:'02-2150-3001',hours:'09:00-20:00'},{id:3,name:'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÌèâÌÉùÎèÑÏÑúÍ¥Ä',address:'Í≤ΩÍ∏∞ ÌèâÌÉùÏãú ÌèâÌÉùÎ°ú 51',phone:'031-659-4800',hours:'10:00-18:00'}];};// ÎèÑÏÑúÍ¥ÄÎ≥Ñ ÏÜåÏû• ÌòÑÌô© ÏÉùÏÑ±\nconst generateLibraryAvailability=libraries=>{return libraries.map(library=>{const totalBooks=Math.floor(Math.random()*8)+3;// 3-10Í∂å\nconst availableBooks=Math.floor(Math.random()*(totalBooks+1));// 0 ~ totalBooks\nconst waitingList=Math.floor(Math.random()*6);// 0-5Î™Ö\nconst available=availableBooks>0;// ÎåÄÏ∂ú Í∞ÄÎä•Ìïú Ï±ÖÏù¥ ÏûàÏúºÎ©¥ true\n// Îçî Íµ¨Ï≤¥Ï†ÅÏù∏ ÏúÑÏπò Ï†ïÎ≥¥ ÏÉùÏÑ±\nconst floor=Math.floor(Math.random()*5)+1;// 1-5Ï∏µ\nconst section=['Î¨∏Ìïô','Í≥ºÌïô','Ïó≠ÏÇ¨','Ï≤†Ìïô','ÏòàÏà†','Í≤ΩÏ†ú','ÏïÑÎèô'][Math.floor(Math.random()*7)];const aisle=String.fromCharCode(65+Math.floor(Math.random()*8));// A-H\nconst callNumber=`${Math.floor(Math.random()*900)+100}.${Math.floor(Math.random()*99)+1}`;return{libraryId:library.id,libraryName:library.name,libraryAddress:library.address,libraryPhone:library.phone,libraryHours:library.hours,available:available,waitingList:waitingList,totalBooks:totalBooks,availableBooks:availableBooks,location:`${floor}Ï∏µ ${section}ÏÑπÏÖò ${aisle}ÏÑúÍ∞Ä | Ï≤≠Íµ¨Í∏∞Ìò∏: ${callNumber}`};});};// Í≤ÄÏÉâ ÏàòÌñâ\nconst performSearch=async query=>{setLoading(true);setHasSearched(true);setApiError('');// ÏßÄÏó≠Ïù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Í∏∞Î≥∏ ÏßÄÏó≠ ÏÑ§Ï†ï\nif(!selectedRegion){setSelectedRegion('ÏàòÏõêÏãú');const defaultLibraries=generateLibrariesByRegion('ÏàòÏõêÏãú');setLibraries(defaultLibraries);}try{const results=await searchBooksAPI(query,1,20);if(results&&results.length>0){setApiStatus('‚úÖ Ïã§Ï†ú ÎèÑÏÑúÍ¥Ä Îç∞Ïù¥ÌÑ∞Î°ú Í≤ÄÏÉâ ÏôÑÎ£å');const currentLibraries=libraries.length>0?libraries:generateLibrariesByRegion('ÏàòÏõêÏãú');const booksWithAvailability=results.map(book=>({...book,availability:generateLibraryAvailability(currentLibraries)}));setSearchResults(booksWithAvailability);}else{setApiStatus('‚ö†Ô∏è ÎèÑÏÑúÍ¥Ä API Ïó∞Í≤∞ Ï§ë - ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ');const dummyResults=getDummySearchResults(query);setSearchResults(dummyResults);}}catch(error){console.error('Í≤ÄÏÉâ Ï§ë Ïò§Î•ò:',error);setApiError('API Ïó∞Í≤∞ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Î•º Ï†úÍ≥µÌï©ÎãàÎã§.');setApiStatus('‚ö†Ô∏è API Ïó∞Í≤∞ Ïò§Î•ò - ÏïàÏ†ïÏ†ÅÏù∏ ÏÑúÎπÑÏä§ Ï†úÍ≥µ');const dummyResults=getDummySearchResults(query);setSearchResults(dummyResults);}finally{setLoading(false);}};// ÎçîÎØ∏ Í≤ÄÏÉâ Í≤∞Í≥º ÏÉùÏÑ±\nconst getDummySearchResults=query=>{const dummyBooks=[{id:'1',title:'Ìï¥Î¶¨Ìè¨ÌÑ∞ÏôÄ ÎßàÎ≤ïÏÇ¨Ïùò Îèå',author:'J.K. Î°§ÎßÅ',publisher:'Î¨∏ÌïôÏàòÏ≤©',isbn:'9788983920072',category:'ÏÜåÏÑ§',publishYear:'1997',description:'Ï†Ñ ÏÑ∏Í≥ÑÎ•º ÏÇ¨Î°úÏû°ÏùÄ ÎßàÎ≤ïÏùò Ïù¥ÏïºÍ∏∞ Ï≤´ Î≤àÏß∏ Í∂å',loanCount:3421},{id:'2',title:'Ìï¥Î¶¨Ìè¨ÌÑ∞ÏôÄ ÎπÑÎ∞ÄÏùò Î∞©',author:'J.K. Î°§ÎßÅ',publisher:'Î¨∏ÌïôÏàòÏ≤©',isbn:'9788983920089',category:'ÏÜåÏÑ§',publishYear:'1998',description:'Ìï¥Î¶¨Ìè¨ÌÑ∞ ÏãúÎ¶¨Ï¶à Îëê Î≤àÏß∏ Í∂å',loanCount:2987},{id:'3',title:'ÎØ∏ÏõÄÎ∞õÏùÑ Ïö©Í∏∞',author:'Í∏∞ÏãúÎØ∏ Ïù¥ÏπòÎ°ú, Í≥†Í∞Ä ÌõÑÎØ∏ÌÉÄÏºÄ',publisher:'Ïù∏ÌîåÎ£®ÏóîÏÖú',isbn:'9788950955671',category:'ÏûêÍ∏∞Í≥ÑÎ∞ú',publishYear:'2014',description:'ÏïÑÎì§Îü¨ Ïã¨Î¶¨ÌïôÏùÑ Î∞îÌÉïÏúºÎ°ú Ìïú Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÏôÄ ÏÇ∂Ïùò ÏßÄÌòúÎ•º Îã¥ÏùÄ Ï±Ö',loanCount:2847},{id:'4',title:'82ÎÖÑÏÉù ÍπÄÏßÄÏòÅ',author:'Ï°∞ÎÇ®Ï£º',publisher:'ÎØºÏùåÏÇ¨',isbn:'9788937473371',category:'ÏÜåÏÑ§',publishYear:'2016',description:'ÌïúÍµ≠ Ïó¨ÏÑ±Ïùò ÌòÑÏã§ÏùÑ ÏÉùÏÉùÌïòÍ≤å Í∑∏Î¶∞ ÏÜåÏÑ§',loanCount:1923},{id:'5',title:'ÏÇ¨ÌîºÏóîÏä§',author:'Ïú†Î∞ú ÌïòÎùºÎ¶¨',publisher:'ÍπÄÏòÅÏÇ¨',isbn:'9788934972464',category:'Ïù∏Î¨∏',publishYear:'2015',description:'Ïù∏Î•òÏùò Ïó≠ÏÇ¨Î•º ÌÜµÏ∞∞Ìïú Î≤†Ïä§Ìä∏ÏÖÄÎü¨',loanCount:1456},{id:'6',title:'ÏõêÌîºÏä§ 1Í∂å',author:'Ïò§Îã§ ÏóêÏù¥ÏπòÎ°ú',publisher:'ÎåÄÏõêÏî®ÏïÑÏù¥',isbn:'9788925208015',category:'ÎßåÌôî',publishYear:'1997',description:'Ìï¥Ï†ÅÏôïÏùÑ ÍøàÍæ∏Îäî Î£®ÌîºÏùò Î™®Ìóò',loanCount:1234}];const filtered=dummyBooks.filter(book=>book.title.toLowerCase().includes(query.toLowerCase())||book.author.toLowerCase().includes(query.toLowerCase())||book.category.toLowerCase().includes(query.toLowerCase()));// Îß§Ïπ≠ÎêòÎäî Í≤∞Í≥ºÎßå Î∞òÌôò (Îß§Ïπ≠ÎêòÏßÄ ÏïäÏúºÎ©¥ Îπà Î∞∞Ïó¥)\nreturn filtered.map(book=>({...book,availability:generateLibraryAvailability(libraries)}));};// Í≤ÄÏÉâ Ìèº Ï†úÏ∂ú\nconst handleSearch=e=>{e.preventDefault();if(searchTerm.trim()){// ÏÉàÎ°úÏö¥ Í≤ÄÏÉâ Ïãú Í∏∞Ï°¥ Í≤∞Í≥º Î∞è ÏßÄÏó≠ ÏÑ†ÌÉù Î¶¨ÏÖã\nsetSearchResults([]);setHasSearched(false);setSelectedRegion('');setLibraries([]);saveRecentSearch(searchTerm.trim());performSearch(searchTerm.trim());}};// ÏòàÏïΩ Ï≤òÎ¶¨\nconst handleReserve=function(bookId,libraryId,libraryName,libraryPhone){let libraryHours=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';let isAvailable=arguments.length>5?arguments[5]:undefined;let availableBooks=arguments.length>6&&arguments[6]!==undefined?arguments[6]:0;let totalBooks=arguments.length>7&&arguments[7]!==undefined?arguments[7]:0;// ÏòàÏïΩ ÎåÄÍ∏∞Îßå ÏûàÎäî Í≤ΩÏö∞ (availableBooks === 0 && totalBooks > 0) Î∞îÎ°ú Ï†ÑÌôî Ïó∞Í≤∞\nif(availableBooks===0&&totalBooks>0){alert('ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÌïòÏó¨ ÎåÄÍ∏∞Ïã†Ï≤≠ÏùÑ ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.');window.location.href=`tel:${libraryPhone}`;return;}const currentTime=new Date();const currentHour=currentTime.getHours();const isOpen=currentHour>=9&&currentHour<18;let message='';if(isAvailable){message=`${libraryName}ÏóêÏÑú Ïù¥ ÎèÑÏÑúÎ•º ÏòàÏïΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;}else{message=`${libraryName}Ïóê ÎåÄÍ∏∞Ïã†Ï≤≠ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;}message+=`\\n\\nüìû Ï†ÑÌôîÎ≤àÌò∏: ${libraryPhone}`;if(libraryHours){message+=`\\n‚è∞ Ïö¥ÏòÅÏãúÍ∞Ñ: ${libraryHours}`;}if(!isOpen){message+=`\\n\\n‚ö†Ô∏è ÌòÑÏû¨ ÏãúÍ∞ÑÏùÄ ÎèÑÏÑúÍ¥Ä Ïö¥ÏòÅÏãúÍ∞Ñ Ïô∏ÏûÖÎãàÎã§.`;message+=`\\nÏö¥ÏòÅÏãúÍ∞ÑÏóê Îã§Ïãú Ï†ÑÌôîÌï¥Ï£ºÏÑ∏Ïöî.`;}const confirmed=window.confirm(message);if(confirmed){if(isAvailable){alert('ÏòàÏïΩ ÌôïÏù∏ÏùÑ ÏúÑÌï¥ ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.');}else{alert('ÎåÄÍ∏∞Ïã†Ï≤≠ ÌôïÏù∏ÏùÑ ÏúÑÌï¥ ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.');}window.location.href=`tel:${libraryPhone}`;}};// Ïô∏Î∂Ä Í≤ÄÏÉâÏñ¥ Ï≤òÎ¶¨\nuseEffect(()=>{if(externalSearchQuery&&externalSearchQuery.trim()){setSearchTerm(externalSearchQuery);performSearch(externalSearchQuery);if(onExternalSearchComplete){onExternalSearchComplete();}}},[externalSearchQuery,onExternalSearchComplete,performSearch]);// Î∂ÄÎ™®ÏóêÏÑú Ï†ÑÎã¨Î∞õÏùÄ ÏßÄÏó≠ Ï†ïÎ≥¥ ÎèôÍ∏∞Ìôî\nuseEffect(()=>{if(parentSelectedRegion!==undefined){setSelectedRegion(parentSelectedRegion);}},[parentSelectedRegion]);// ÏßÄÏó≠ ÏÑ†ÌÉù Ï≤òÎ¶¨\nuseEffect(()=>{if(selectedRegion){const regionLibraries=generateLibrariesByRegion(selectedRegion);setLibraries(regionLibraries);}},[selectedRegion]);// ÏßÄÏó≠Ïù¥ Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í≤ÄÏÉâ Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏\nconst updateSearchResultsWithLibraries=React.useCallback(newLibraries=>{setSearchResults(prevResults=>{if(prevResults.length>0&&newLibraries.length>0){return prevResults.map(book=>({...book,availability:generateLibraryAvailability(newLibraries)}));}return prevResults;});},[]);// ÎèÑÏÑúÍ¥Ä Ï†ïÎ≥¥Í∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í≤ÄÏÉâ Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏\nuseEffect(()=>{if(libraries.length>0){updateSearchResultsWithLibraries(libraries);}},[libraries,updateSearchResultsWithLibraries]);// librariesÍ∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßå Ïã§Ìñâ\nreturn/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(SearchForm,{onSubmit:handleSearch,children:[/*#__PURE__*/_jsxs(SearchInputContainer,{children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"\\uCC3E\\uC73C\\uC2DC\\uB294 \\uB3C4\\uC11C\\uBA85\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\",value:searchTerm,onChange:handleSearchInputChange,onFocus:handleSearchInputFocus,onBlur:handleAutocompleteClose}),showAutocomplete&&autocompleteItems.length>0&&/*#__PURE__*/_jsx(AutocompleteDropdown,{children:autocompleteItems.map((item,index)=>/*#__PURE__*/_jsxs(AutocompleteItemElement,{onClick:()=>handleAutocompleteSelect(item),children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon\",children:item.type==='recent'?'üïê':item.type==='popular'?'üî•':'üí°'}),/*#__PURE__*/_jsx(\"span\",{className:\"text\",children:item.text}),/*#__PURE__*/_jsx(\"span\",{className:\"category\",children:item.category})]},index))})]}),/*#__PURE__*/_jsx(SearchButton,{type:\"submit\",disabled:loading,children:loading?'Í≤ÄÏÉâ Ï§ë...':'üîç Í≤ÄÏÉâ'})]}),searchResults.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginBottom:'20px'},children:/*#__PURE__*/_jsx(RegionSelector,{onLibrariesUpdate:setLibraries,selectedRegion:selectedRegion,onRegionUpdate:region=>{setSelectedRegion(region);if(onRegionUpdate){onRegionUpdate(region);}// ÏßÄÏó≠ Î≥ÄÍ≤Ω Ïãú Ï¶âÏãú ÎèÑÏÑúÍ¥Ä Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏\nconst regionLibraries=generateLibrariesByRegion(region);setLibraries(regionLibraries);}})}),apiStatus&&/*#__PURE__*/_jsx(ApiStatus,{isError:!!apiError,children:apiStatus}),loading&&/*#__PURE__*/_jsx(LoadingDiv,{children:\"\\uD83D\\uDCDA \\uC2E4\\uC81C \\uB3C4\\uC11C\\uAD00 API\\uC5D0\\uC11C \\uAC80\\uC0C9\\uD558\\uACE0 \\uC788\\uC2B5\\uB2C8\\uB2E4...\"}),!loading&&hasSearched&&searchResults.length===0&&/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDCD6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"title\",children:\"\\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"div\",{className:\"subtitle\",children:\"\\uB2E4\\uB978 \\uD0A4\\uC6CC\\uB4DC\\uB85C \\uAC80\\uC0C9\\uD574\\uBCF4\\uC138\\uC694\"})]}),!loading&&searchResults.length>0&&/*#__PURE__*/_jsx(SearchResults,{children:searchResults.map(book=>/*#__PURE__*/_jsxs(BookCard,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'15px'},children:[/*#__PURE__*/_jsx(BookTitle,{children:book.title}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleBookmark(book.id),style:{background:'none',border:'none',fontSize:'24px',cursor:'pointer',color:isBookmarked(book.id)?'#ff6b6b':'#ccc',transition:'color 0.3s'},title:isBookmarked(book.id)?'Ï¶êÍ≤®Ï∞æÍ∏∞ Ìï¥Ï†ú':'Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä',children:isBookmarked(book.id)?'‚ù§Ô∏è':'ü§ç'})]}),/*#__PURE__*/_jsxs(BookInfo,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC800\\uC790: \",book.author]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCD9C\\uD310\\uC0AC: \",book.publisher]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCE74\\uD14C\\uACE0\\uB9AC: \",book.category]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCD9C\\uAC04\\uB144\\uB3C4: \",book.publishYear]}),book.loanCount&&/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uB300\\uCD9C \\uD69F\\uC218: \",book.loanCount.toLocaleString(),\"\\uD68C\"]})]}),book.description&&/*#__PURE__*/_jsx(BookDescription,{children:book.description}),selectedRegion&&/*#__PURE__*/_jsxs(AvailabilitySection,{children:[/*#__PURE__*/_jsxs(AvailabilityTitle,{children:[\"\\uD83D\\uDCCD \",selectedRegion,\" \\uB3C4\\uC11C\\uAD00 \\uC18C\\uC7A5 \\uD604\\uD669\"]}),/*#__PURE__*/_jsx(LibraryList,{children:book.availability.sort((a,b)=>{if(a.available&&!b.available)return-1;if(!a.available&&b.available)return 1;if(a.available&&b.available)return a.waitingList-b.waitingList;return a.waitingList-b.waitingList;}).map(avail=>/*#__PURE__*/_jsxs(LibraryItem,{children:[/*#__PURE__*/_jsxs(LibraryHeader,{children:[/*#__PURE__*/_jsxs(LibraryName,{children:[avail.available?'‚úÖ ':'‚ùå ',avail.libraryName]}),/*#__PURE__*/_jsxs(LibraryAddress,{children:[\"\\uD83D\\uDCCD \",avail.libraryAddress]}),/*#__PURE__*/_jsxs(LibraryPhone,{children:[\"\\uD83D\\uDCDE \",avail.libraryPhone]}),/*#__PURE__*/_jsxs(LibraryHours,{children:[\"\\u23F0 \",avail.libraryHours||'09:00-18:00']})]}),/*#__PURE__*/_jsx(LibraryStats,{children:avail.availableBooks>0&&/*#__PURE__*/_jsxs(\"div\",{style:{background:'#e8f5e8',border:'1px solid #4CAF50',borderRadius:'8px',padding:'12px',marginBottom:'10px'},children:[/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',marginBottom:'8px',fontWeight:'bold',color:'#2e7d32'},children:\"\\uD83D\\uDCD6 \\uB300\\uCD9C \\uAC00\\uB2A5\\uD55C \\uB3C4\\uC11C \\uC704\\uCE58\"}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#1b5e20',lineHeight:'1.4'},children:[\"\\uD83D\\uDCCD \",avail.location]}),/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',color:'#2e7d32',marginTop:'4px'},children:[\"\\u2705 \\uB300\\uCD9C \\uAC00\\uB2A5 \",avail.availableBooks,\"\\uAD8C\"]})]})}),avail.availableBooks===0&&avail.totalBooks>0&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#e8f5e8',border:'1px solid #4CAF50',borderRadius:'8px',padding:'12px',margin:'10px 0',fontSize:'14px',color:'#2e7d32'},children:\"\\uD83D\\uDCDE \\uD604\\uC7AC \\uBAA8\\uB4E0 \\uB3C4\\uC11C\\uAC00 \\uB300\\uCD9C \\uC911\\uC785\\uB2C8\\uB2E4.\"}),avail.totalBooks===0&&/*#__PURE__*/_jsx(\"div\",{style:{background:'#f8d7da',border:'1px solid #f5c6cb',borderRadius:'8px',padding:'12px',margin:'10px 0',fontSize:'14px',color:'#721c24'},children:\"\\u274C \\uC774 \\uB3C4\\uC11C\\uAD00\\uC5D0\\uB294 \\uD574\\uB2F9 \\uB3C4\\uC11C\\uAC00 \\uC18C\\uC7A5\\uB418\\uC5B4 \\uC788\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center',marginBottom:'10px'},children:[avail.waitingList>0&&/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'14px',fontWeight:'bold',color:'var(--accent-color)',display:'flex',alignItems:'center',gap:'6px'},children:[\"\\u23F3 \\uC608\\uC57D \\uB300\\uAE30 \",avail.waitingList,\"\\uBA85\"]}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:'auto'},children:/*#__PURE__*/_jsx(ReserveButton,{available:avail.available||avail.availableBooks===0&&avail.totalBooks>0,onClick:()=>handleReserve(book.id,avail.libraryId,avail.libraryName,avail.libraryPhone,avail.libraryHours||'09:00-18:00',avail.available,avail.availableBooks,avail.totalBooks),disabled:avail.totalBooks===0,children:avail.totalBooks===0?'üìµ ÏÜåÏû• ÏóÜÏùå':'üìñ Î∞îÎ°ú ÏòàÏïΩ'})})]})]},avail.libraryId))})]})]},book.id))})]});};export default BookSearchSection;","map":{"version":3,"names":["React","useState","useEffect","styled","RegionSelector","searchBooksAPI","checkApiApprovalStatus","jsx","_jsx","jsxs","_jsxs","Container","div","SearchForm","form","SearchInputContainer","SearchInput","input","AutocompleteDropdown","AutocompleteItemElement","SearchButton","button","LoadingDiv","EmptyState","SearchResults","BookCard","BookTitle","h3","BookInfo","BookDescription","p","AvailabilitySection","AvailabilityTitle","h4","LibraryList","LibraryItem","LibraryHeader","LibraryName","LibraryAddress","LibraryPhone","LibraryHours","LibraryStats","ReserveButton","props","available","ApiStatus","isError","BookSearchSection","_ref","externalSearchQuery","onExternalSearchComplete","selectedRegion","parentSelectedRegion","onRegionUpdate","searchTerm","setSearchTerm","searchResults","setSearchResults","loading","setLoading","hasSearched","setHasSearched","setSelectedRegion","libraries","setLibraries","apiStatus","setApiStatus","apiError","setApiError","recentSearches","setRecentSearches","showAutocomplete","setShowAutocomplete","autocompleteItems","setAutocompleteItems","bookmarks","setBookmarks","popularSearches","text","category","updateAutocomplete","inputValue","trim","items","slice","map","search","type","searchValue","toLowerCase","matchedItems","forEach","includes","push","length","handleAutocompleteSelect","item","saveRecentSearch","performSearch","handleSearchInputChange","e","value","target","setTimeout","handleSearchInputFocus","handleAutocompleteClose","savedSearches","localStorage","getItem","JSON","parse","savedBookmarks","query","updated","filter","s","setItem","stringify","toggleBookmark","bookId","id","isBookmarked","checkApprovalStatus","isApproved","error","generateLibrariesByRegion","region","regionLower","cityName","replace","name","address","phone","hours","libraryData","key","data","Object","entries","generateLibraryAvailability","library","totalBooks","Math","floor","random","availableBooks","waitingList","section","aisle","String","fromCharCode","callNumber","libraryId","libraryName","libraryAddress","libraryPhone","libraryHours","location","defaultLibraries","results","currentLibraries","booksWithAvailability","book","availability","dummyResults","getDummySearchResults","console","dummyBooks","title","author","publisher","isbn","publishYear","description","loanCount","filtered","handleSearch","preventDefault","handleReserve","arguments","undefined","isAvailable","alert","window","href","currentTime","Date","currentHour","getHours","isOpen","message","confirmed","confirm","regionLibraries","updateSearchResultsWithLibraries","useCallback","newLibraries","prevResults","children","onSubmit","placeholder","onChange","onFocus","onBlur","index","onClick","className","disabled","style","marginBottom","onLibrariesUpdate","display","justifyContent","alignItems","background","border","fontSize","cursor","color","transition","toLocaleString","sort","a","b","avail","borderRadius","padding","gap","fontWeight","lineHeight","marginTop","margin","marginLeft"],"sources":["C:/Users/qoo/Desktop/zziyoonii/senior/src/components/BookSearchSection.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport RegionSelector from './RegionSelector';\nimport { searchBooksAPI, checkApiApprovalStatus } from '../services/LibraryAPI';\n\n// Ïä§ÌÉÄÏùºÎìú Ïª¥Ìè¨ÎÑåÌä∏ Ï†ïÏùò\nconst Container = styled.div`\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n`;\n\nconst SearchForm = styled.form`\n  display: flex;\n  gap: 15px;\n  margin-bottom: 25px;\n  flex-wrap: wrap;\n`;\n\nconst SearchInputContainer = styled.div`\n  position: relative;\n  flex: 1;\n  min-width: 300px;\n`;\n\nconst SearchInput = styled.input`\n  width: 100%;\n  padding: 15px 20px;\n  border: 2px solid #e0e0e0;\n  border-radius: 8px;\n  font-size: 18px;\n  outline: none;\n  transition: border-color 0.3s;\n  \n  &:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n  }\n  \n  &::placeholder {\n    color: #666;\n    font-size: 16px;\n  }\n`;\n\nconst AutocompleteDropdown = styled.div`\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n  max-height: 300px;\n  overflow-y: auto;\n  z-index: 1000;\n  margin-top: 4px;\n`;\n\nconst AutocompleteItemElement = styled.div`\n  padding: 12px 16px;\n  cursor: pointer;\n  border-bottom: 1px solid #f0f0f0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 16px;\n  \n  &:hover {\n    background: #f8f9fa;\n  }\n  \n  &:last-child {\n    border-bottom: none;\n  }\n  \n  .icon {\n    color: #666;\n    font-size: 14px;\n  }\n  \n  .text {\n    flex: 1;\n  }\n  \n  .category {\n    color: #999;\n    font-size: 12px;\n  }\n`;\n\nconst SearchButton = styled.button`\n  padding: 15px 30px;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 18px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  white-space: nowrap;\n  \n  &:hover {\n    background: #45a049;\n    transform: translateY(-2px);\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;\n\n\n\nconst LoadingDiv = styled.div`\n  text-align: center;\n  padding: 40px;\n  font-size: 18px;\n  color: #666;\n  background: white;\n  border-radius: 8px;\n  margin: 20px 0;\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 60px 20px;\n  background: white;\n  border-radius: 8px;\n  margin: 20px 0;\n  \n  .emoji {\n    font-size: 48px;\n    margin-bottom: 20px;\n  }\n  \n  .title {\n    font-size: 24px;\n    font-weight: 600;\n    color: #333;\n    margin-bottom: 10px;\n  }\n  \n  .subtitle {\n    font-size: 16px;\n    color: #666;\n  }\n`;\n\nconst SearchResults = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n`;\n\nconst BookCard = styled.div`\n  background: white;\n  border-radius: 12px;\n  padding: 25px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  border: 1px solid #e0e0e0;\n  transition: transform 0.3s, box-shadow 0.3s;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);\n  }\n`;\n\nconst BookTitle = styled.h3`\n  margin: 0;\n  color: #333;\n  font-size: 20px;\n  font-weight: 600;\n  line-height: 1.4;\n  flex: 1;\n`;\n\nconst BookInfo = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  margin-bottom: 15px;\n  \n  span {\n    color: #666;\n    font-size: 14px;\n  }\n`;\n\nconst BookDescription = styled.p`\n  color: #555;\n  font-size: 14px;\n  line-height: 1.5;\n  margin-bottom: 20px;\n  padding: 15px;\n  background: #f8f9fa;\n  border-radius: 8px;\n`;\n\nconst AvailabilitySection = styled.div`\n  border-top: 1px solid #e0e0e0;\n  padding-top: 20px;\n`;\n\nconst AvailabilityTitle = styled.h4`\n  margin: 0 0 15px 0;\n  color: #333;\n  font-size: 16px;\n  font-weight: 600;\n`;\n\nconst LibraryList = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nconst LibraryItem = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  background: #fafafa;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n`;\n\nconst LibraryHeader = styled.div`\n  flex: 1;\n  margin-bottom: 10px;\n`;\n\nconst LibraryName = styled.h4`\n  margin: 0 0 4px 0;\n  color: #333;\n  font-size: 18px;\n  font-weight: 600;\n`;\n\nconst LibraryAddress = styled.p`\n  margin: 0 0 4px 0;\n  color: #666;\n  font-size: 14px;\n`;\n\nconst LibraryPhone = styled.p`\n  margin: 0 0 4px 0;\n  color: #4CAF50;\n  font-size: 14px;\n  font-weight: 600;\n`;\n\nconst LibraryHours = styled.p`\n  margin: 0 0 4px 0;\n  color: #666;\n  font-size: 12px;\n`;\n\nconst LibraryStats = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-bottom: 15px;\n  padding: 10px 0;\n  border-top: 1px solid #eee;\n  border-bottom: 1px solid #eee;\n`;\n\n// ActionButtons Ïä§ÌÉÄÏùºÎìú Ïª¥Ìè¨ÎÑåÌä∏ Ï†úÍ±∞ (ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå)\n\nconst ReserveButton = styled.button<{ available: boolean }>`\n  padding: 8px 15px;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  white-space: nowrap;\n  \n  background: ${props => props.available ? '#4CAF50' : '#ff9800'};\n  color: white;\n  \n  &:hover:not(:disabled) {\n    background: ${props => props.available ? '#45a049' : '#f57c00'};\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    opacity: 0.6;\n  }\n`;\n\nconst ApiStatus = styled.div<{ isError: boolean }>`\n  padding: 12px 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n  font-size: 14px;\n  font-weight: 600;\n  \n  background: ${props => props.isError ? '#ffebee' : '#e8f5e8'};\n  color: ${props => props.isError ? '#c62828' : '#2e7d32'};\n  border: 1px solid ${props => props.isError ? '#ffcdd2' : '#c8e6c9'};\n`;\n\n\n\n// Ïù∏ÌÑ∞ÌéòÏù¥Ïä§ Ï†ïÏùò\ninterface Library {\n  id: number;\n  name: string;\n  address: string;\n  phone: string;\n  hours?: string;\n}\n\ninterface AutocompleteItemData {\n  text: string;\n  category: string;\n  type: 'popular' | 'recent' | 'suggestion';\n}\n\ninterface Book {\n  id: string;\n  title: string;\n  author: string;\n  publisher: string;\n  isbn: string;\n  category: string;\n  publishYear: string;\n  description?: string;\n  imageUrl?: string;\n  loanCount?: number;\n  availability: Array<{\n    libraryId: number;\n    libraryName: string;\n    libraryAddress: string;\n    libraryPhone: string;\n    libraryHours?: string;\n    available: boolean;\n    waitingList: number;\n    totalBooks: number;\n    availableBooks: number;\n    location: string;\n  }>;\n}\n\ninterface BookSearchSectionProps {\n  externalSearchQuery?: string;\n  onExternalSearchComplete?: () => void;\n  selectedRegion?: string;\n  onRegionUpdate?: (region: string) => void;\n}\n\nconst BookSearchSection: React.FC<BookSearchSectionProps> = ({ \n  externalSearchQuery, \n  onExternalSearchComplete,\n  selectedRegion: parentSelectedRegion,\n  onRegionUpdate \n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState<Book[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [selectedRegion, setSelectedRegion] = useState(parentSelectedRegion || '');\n  const [libraries, setLibraries] = useState<Library[]>([]);\n  const [apiStatus, setApiStatus] = useState<string>('');\n  const [apiError, setApiError] = useState<string>('');\n\n  // ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ ÏÉÅÌÉú\n  const [recentSearches, setRecentSearches] = useState<string[]>([]);\n\n  // ÏûêÎèôÏôÑÏÑ± ÏÉÅÌÉú\n  const [showAutocomplete, setShowAutocomplete] = useState(false);\n  const [autocompleteItems, setAutocompleteItems] = useState<AutocompleteItemData[]>([]);\n\n  // Ï¶êÍ≤®Ï∞æÍ∏∞ ÏÉÅÌÉú\n  const [bookmarks, setBookmarks] = useState<string[]>([]);\n\n\n\n  // Ïù∏Í∏∞ Í≤ÄÏÉâÏñ¥ Î™©Î°ù\n  const popularSearches = [\n    { text: 'Îã¨Í≥º 6ÌéúÏä§', category: 'Î¨∏Ìïô' },\n    { text: 'ÎØ∏ÏõÄÎ∞õÏùÑ Ïö©Í∏∞', category: 'ÏûêÍ∏∞Í≥ÑÎ∞ú' },\n    { text: 'ÏàòÌïôÏùò Ï†ïÏÑù', category: 'ÍµêÏú°' },\n    { text: '82ÎÖÑÏÉù ÍπÄÏßÄÏòÅ', category: 'ÏÜåÏÑ§' },\n    { text: 'ÏõêÏîΩ', category: 'ÏûêÍ∏∞Í≥ÑÎ∞ú' },\n    { text: 'ÏÑ∏Í≥ÑÏÇ¨ Ìé∏ÏßÄ', category: 'Ïó≠ÏÇ¨' },\n    { text: 'ÏΩîÏä§Î™®Ïä§', category: 'Í≥ºÌïô' },\n    { text: 'ÏûëÎ≥ÑÌïòÏßÄ ÏïäÎäîÎã§', category: 'ÏÜåÏÑ§' },\n    { text: 'ÏïÑÌîÑÎãàÍπå Ï≤≠Ï∂òÏù¥Îã§', category: 'ÏóêÏÑ∏Ïù¥' },\n    { text: 'Î∂àÌé∏Ìïú Ìé∏ÏùòÏ†ê', category: 'ÏÜåÏÑ§' },\n    { text: 'ÏïÑÎ™¨Îìú', category: 'ÏÜåÏÑ§' },\n    { text: 'ÎãπÏã†Ïù¥ Ïò≥Îã§', category: 'ÏóêÏÑ∏Ïù¥' },\n    { text: 'ÏÇ¨ÌîºÏóîÏä§', category: 'Ïù∏Î¨∏' },\n    { text: 'Îç∞ÎØ∏Ïïà', category: 'Î¨∏Ìïô' },\n    { text: 'Ïñ¥Î¶∞ÏôïÏûê', category: 'Î¨∏Ìïô' }\n  ];\n\n  // ÏûêÎèôÏôÑÏÑ± Í∏∞Îä•\n  const updateAutocomplete = (inputValue: string) => {\n    if (!inputValue.trim()) {\n      const items: AutocompleteItemData[] = [\n        ...recentSearches.slice(0, 5).map(search => ({\n          text: search,\n          category: 'ÏµúÍ∑º Í≤ÄÏÉâ',\n          type: 'recent' as const\n        })),\n        ...popularSearches.slice(0, 5).map(search => ({\n          text: search.text,\n          category: search.category,\n          type: 'popular' as const\n        }))\n      ];\n      setAutocompleteItems(items);\n      setShowAutocomplete(true);\n      return;\n    }\n\n    const searchValue = inputValue.toLowerCase();\n    const matchedItems: AutocompleteItemData[] = [];\n\n    recentSearches.forEach(search => {\n      if (search.toLowerCase().includes(searchValue)) {\n        matchedItems.push({\n          text: search,\n          category: 'ÏµúÍ∑º Í≤ÄÏÉâ',\n          type: 'recent'\n        });\n      }\n    });\n\n    popularSearches.forEach(search => {\n      if (search.text.toLowerCase().includes(searchValue)) {\n        matchedItems.push({\n          text: search.text,\n          category: search.category,\n          type: 'popular'\n        });\n      }\n    });\n\n    setAutocompleteItems(matchedItems.slice(0, 10));\n    setShowAutocomplete(matchedItems.length > 0);\n  };\n\n  // ÏûêÎèôÏôÑÏÑ± ÏïÑÏù¥ÌÖú ÏÑ†ÌÉù Ï≤òÎ¶¨\n  const handleAutocompleteSelect = (item: AutocompleteItemData) => {\n    setSearchTerm(item.text);\n    setShowAutocomplete(false);\n    saveRecentSearch(item.text);\n    performSearch(item.text);\n  };\n\n  // Í≤ÄÏÉâ ÏûÖÎ†• Ï≤òÎ¶¨\n  const handleSearchInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setSearchTerm(value);\n    \n    setTimeout(() => {\n      updateAutocomplete(value);\n    }, 300);\n  };\n\n  // Í≤ÄÏÉâ ÏûÖÎ†• Ìè¨Ïª§Ïä§ Ï≤òÎ¶¨\n  const handleSearchInputFocus = () => {\n    updateAutocomplete(searchTerm);\n  };\n\n  // ÏûêÎèôÏôÑÏÑ± Îã´Í∏∞\n  const handleAutocompleteClose = () => {\n    setTimeout(() => setShowAutocomplete(false), 150);\n  };\n\n  // Ïª¥Ìè¨ÎÑåÌä∏ ÎßàÏö¥Ìä∏ Ïãú ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ Î∞è Ï¶êÍ≤®Ï∞æÍ∏∞ Î∂àÎü¨Ïò§Í∏∞\n  useEffect(() => {\n    const savedSearches = localStorage.getItem('recentSearches');\n    if (savedSearches) {\n      setRecentSearches(JSON.parse(savedSearches));\n    }\n    \n    const savedBookmarks = localStorage.getItem('bookmarks');\n    if (savedBookmarks) {\n      setBookmarks(JSON.parse(savedBookmarks));\n    }\n  }, []);\n\n  // ÏµúÍ∑º Í≤ÄÏÉâÏñ¥ Ï†ÄÏû•\n  const saveRecentSearch = (query: string) => {\n    const updated = [query, ...recentSearches.filter(s => s !== query)].slice(0, 10);\n    setRecentSearches(updated);\n    localStorage.setItem('recentSearches', JSON.stringify(updated));\n  };\n\n  // Ï¶êÍ≤®Ï∞æÍ∏∞ ÌÜ†Í∏Ä\n  const toggleBookmark = (bookId: string) => {\n    let updated: string[];\n    if (bookmarks.includes(bookId)) {\n      updated = bookmarks.filter(id => id !== bookId);\n    } else {\n      updated = [...bookmarks, bookId];\n    }\n    setBookmarks(updated);\n    localStorage.setItem('bookmarks', JSON.stringify(updated));\n  };\n\n  // Ï¶êÍ≤®Ï∞æÍ∏∞ Ïó¨Î∂Ä ÌôïÏù∏\n  const isBookmarked = (bookId: string) => bookmarks.includes(bookId);\n\n  // API ÏäπÏù∏ ÏÉÅÌÉú ÌôïÏù∏\n  useEffect(() => {\n    const checkApprovalStatus = async () => {\n      try {\n        const isApproved = await checkApiApprovalStatus('651824a6d5a5d765b513f7f8059ef5ffb2ac3c30f15f0114a8764076c8b902b8');\n        if (isApproved) {\n          setApiStatus('‚úÖ Ïã§ÏãúÍ∞Ñ ÎèÑÏÑúÍ¥Ä API Ïó∞Í≤∞Îê®');\n        } else {\n          setApiStatus('‚ö†Ô∏è API ÏäπÏù∏ ÎåÄÍ∏∞ Ï§ë - ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ');\n        }\n      } catch (error) {\n        setApiStatus('‚ö†Ô∏è API Ïó∞Í≤∞ ÌôïÏù∏ Ï§ë - ÏïàÏ†ïÏ†ÅÏù∏ ÏÑúÎπÑÏä§ Ï†úÍ≥µ');\n      }\n    };\n\n    checkApprovalStatus();\n  }, []);\n\n  // ÏßÄÏó≠Î≥Ñ ÎèÑÏÑúÍ¥Ä ÏÉùÏÑ±\n  const generateLibrariesByRegion = (region: string): Library[] => {\n    const regionLower = region.toLowerCase();\n    // Îèô Îã®ÏúÑ ÏßÄÏó≠ Ï≤òÎ¶¨\n    if (regionLower.includes('Îèô')) {\n      const cityName = region.replace('Îèô', '');\n      return [\n        { id: 1, name: `${cityName}Îèô Ï£ºÎØºÏÑºÌÑ∞ ÎèÑÏÑúÍ¥Ä`, address: `Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Ï§ëÏïôÎ°ú 123`, phone: '031-123-4567', hours: '09:00-18:00' },\n        { id: 2, name: `${cityName}Îèô Íµ¨ÎØºÌöåÍ¥Ä ÎèÑÏÑúÍ¥Ä`, address: `Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Î≥µÌï©Î¨∏ÌôîÏÑºÌÑ∞ 2Ï∏µ`, phone: '031-234-5678', hours: '10:00-20:00' },\n        { id: 3, name: `${cityName}Îèô ÏûëÏùÄÎèÑÏÑúÍ¥Ä`, address: `Í≤ΩÍ∏∞ÎèÑ ${cityName}Îèô Ï£ºÌÉùÍ∞Ä ÎÇ¥ ÏûëÏùÄÎèÑÏÑúÍ¥Ä`, phone: '031-345-6789', hours: '10:00-18:00' }\n      ];\n    }\n    \n    // Ïãú Îã®ÏúÑ ÏßÄÏó≠Î≥Ñ ÎèÑÏÑúÍ¥Ä Îç∞Ïù¥ÌÑ∞\n    const libraryData: { [key: string]: Library[] } = {\n      'ÏàòÏõê': [\n        { id: 1, name: 'ÏàòÏõêÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ Í¥ëÍµêÎ°ú 183', phone: '031-228-4300', hours: '09:00-22:00' },\n        { id: 2, name: 'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏõîÎìúÏªµÎ°ú 235', phone: '031-249-4800', hours: '09:00-18:00' },\n        { id: 3, name: 'ÏòÅÌÜµÍµ¨Î¶ΩÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏòÅÌÜµÎèô 999-1', phone: '031-228-4350', hours: '09:00-20:00' }\n      ],\n      'ÏÑ±ÎÇ®': [\n        { id: 1, name: 'ÏÑ±ÎÇ®ÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ ÏñëÌòÑÎ°ú 346', phone: '031-729-4600', hours: '09:00-18:00' },\n        { id: 2, name: 'Î∂ÑÎãπÍµ¨Î¶ΩÏ†ïÏûêÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ Ï†ïÏûêÎèô 178-1', phone: '031-729-4650', hours: '09:00-20:00' },\n        { id: 3, name: 'ÏÑúÌòÑÏûëÏùÄÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏÑ±ÎÇ®Ïãú Î∂ÑÎãπÍµ¨ ÏÑúÌòÑÎèô 271-3', phone: '031-729-4670', hours: '10:00-18:00' }\n      ],\n      'Í≥†Ïñë': [\n        { id: 1, name: 'Í≥†ÏñëÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÎçïÏñëÍµ¨ Í≥†ÏñëÎåÄÎ°ú 1955', phone: '031-8075-9300', hours: '09:00-18:00' },\n        { id: 2, name: 'ÏùºÏÇ∞ÎèôÍµ¨Î¶ΩÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÏùºÏÇ∞ÎèôÍµ¨ Î∞±ÏÑùÎèô 1256', phone: '031-8075-9350', hours: '09:00-20:00' },\n        { id: 3, name: 'Î∞±ÏÑùÏûëÏùÄÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Í≥†ÏñëÏãú ÏùºÏÇ∞ÎèôÍµ¨ Î∞±ÏÑùÎèô 1234-5', phone: '031-8075-9380', hours: '10:00-18:00' }\n      ],\n      'Î∂ÄÏ≤ú': [\n        { id: 1, name: 'Î∂ÄÏ≤úÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ Í∏∏Ï£ºÎ°ú 1', phone: '032-320-3901', hours: '09:00-18:00' },\n        { id: 2, name: 'Î∂ÄÏ≤úÏãúÎ¶ΩÏõêÎØ∏ÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ Ï§ëÎèôÎ°ú 7', phone: '032-320-3902', hours: '09:00-20:00' },\n        { id: 3, name: 'Î∂ÄÏ≤úÏãúÎ¶ΩÏÉÅÎèôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Î∂ÄÏ≤úÏãú ÏõêÎØ∏Íµ¨ ÏÉÅÎèôÎ°ú 92', phone: '032-320-3903', hours: '10:00-18:00' }\n      ],\n      'ÏïàÏñë': [\n        { id: 1, name: 'ÏïàÏñëÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎßåÏïàÍµ¨ Î¨∏ÏòàÎ°ú 86', phone: '031-8045-2600', hours: '09:00-18:00' },\n        { id: 2, name: 'ÏïàÏñëÏãúÎ¶ΩÏÑùÏàòÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎßåÏïàÍµ¨ ÏÑùÏàòÎ°ú 80', phone: '031-8045-2650', hours: '09:00-20:00' },\n        { id: 3, name: 'ÏïàÏñëÏãúÎ¶ΩÌò∏Í≥ÑÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏïàÏñëÏãú ÎèôÏïàÍµ¨ Ìò∏Í≥ÑÎ°ú 103', phone: '031-8045-2700', hours: '10:00-18:00' }\n      ],\n      'Ïö©Ïù∏': [\n        { id: 1, name: 'Ïö©Ïù∏ÏãúÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Ï≤òÏù∏Íµ¨ Ï§ëÎ∂ÄÎåÄÎ°ú 1199', phone: '031-324-4600', hours: '09:00-18:00' },\n        { id: 2, name: 'Í∏∞Ìù•ÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Í∏∞Ìù•Íµ¨ Í∏∞Ìù•Î°ú 19', phone: '031-324-4650', hours: '09:00-20:00' },\n        { id: 3, name: 'ÏàòÏßÄÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú ÏàòÏßÄÍµ¨ Ìè¨ÏùÄÎåÄÎ°ú 435', phone: '031-324-4700', hours: '10:00-18:00' },\n        { id: 4, name: 'ÏÑúÎÜçÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Ïö©Ïù∏Ïãú Í∏∞Ìù•Íµ¨ ÏÑúÏ≤úÏÑúÎ°ú 83', phone: '031-324-4680', hours: '09:00-18:00' }\n      ]\n    };\n    \n    // Ï†ïÌôïÌïú ÏßÄÏó≠Î™Ö Îß§Ïπ≠ (Ïãú Ïù¥Î¶Ñ Ï∂îÏ∂ú)\n    for (const [key, data] of Object.entries(libraryData)) {\n      if (regionLower.includes(key)) {\n        return data;\n      }\n    }\n    \n    // Í∏∞Î≥∏Í∞í: Í≤ΩÍ∏∞ÎèÑ ÎåÄÌëú ÎèÑÏÑúÍ¥ÄÎì§\n    return [\n      { id: 1, name: 'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÏ§ëÏïôÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÏàòÏõêÏãú ÏòÅÌÜµÍµ¨ ÏõîÎìúÏªµÎ°ú 235', phone: '031-249-4800', hours: '09:00-18:00' },\n      { id: 2, name: 'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÍ≥ºÏ≤úÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ Í≥ºÏ≤úÏãú Î≥ÑÏñëÏÉÅÍ∞Ä2Î°ú 84', phone: '02-2150-3001', hours: '09:00-20:00' },\n      { id: 3, name: 'Í≤ΩÍ∏∞ÎèÑÎ¶ΩÌèâÌÉùÎèÑÏÑúÍ¥Ä', address: 'Í≤ΩÍ∏∞ ÌèâÌÉùÏãú ÌèâÌÉùÎ°ú 51', phone: '031-659-4800', hours: '10:00-18:00' }\n    ];\n  };\n\n  // ÎèÑÏÑúÍ¥ÄÎ≥Ñ ÏÜåÏû• ÌòÑÌô© ÏÉùÏÑ±\n  const generateLibraryAvailability = (libraries: Library[]) => {\n    return libraries.map(library => {\n      const totalBooks = Math.floor(Math.random() * 8) + 3; // 3-10Í∂å\n      const availableBooks = Math.floor(Math.random() * (totalBooks + 1)); // 0 ~ totalBooks\n      const waitingList = Math.floor(Math.random() * 6); // 0-5Î™Ö\n      const available = availableBooks > 0; // ÎåÄÏ∂ú Í∞ÄÎä•Ìïú Ï±ÖÏù¥ ÏûàÏúºÎ©¥ true\n      \n      // Îçî Íµ¨Ï≤¥Ï†ÅÏù∏ ÏúÑÏπò Ï†ïÎ≥¥ ÏÉùÏÑ±\n      const floor = Math.floor(Math.random() * 5) + 1; // 1-5Ï∏µ\n      const section = ['Î¨∏Ìïô', 'Í≥ºÌïô', 'Ïó≠ÏÇ¨', 'Ï≤†Ìïô', 'ÏòàÏà†', 'Í≤ΩÏ†ú', 'ÏïÑÎèô'][Math.floor(Math.random() * 7)];\n      const aisle = String.fromCharCode(65 + Math.floor(Math.random() * 8)); // A-H\n      const callNumber = `${Math.floor(Math.random() * 900) + 100}.${Math.floor(Math.random() * 99) + 1}`;\n      \n      return {\n        libraryId: library.id,\n        libraryName: library.name,\n        libraryAddress: library.address,\n        libraryPhone: library.phone,\n        libraryHours: library.hours,\n        available: available,\n        waitingList: waitingList,\n        totalBooks: totalBooks,\n        availableBooks: availableBooks,\n        location: `${floor}Ï∏µ ${section}ÏÑπÏÖò ${aisle}ÏÑúÍ∞Ä | Ï≤≠Íµ¨Í∏∞Ìò∏: ${callNumber}`\n      };\n    });\n  };\n\n  // Í≤ÄÏÉâ ÏàòÌñâ\n  const performSearch = async (query: string) => {\n    setLoading(true);\n    setHasSearched(true);\n    setApiError('');\n\n    // ÏßÄÏó≠Ïù¥ ÏÑ†ÌÉùÎêòÏßÄ ÏïäÏïòÏúºÎ©¥ Í∏∞Î≥∏ ÏßÄÏó≠ ÏÑ§Ï†ï\n    if (!selectedRegion) {\n      setSelectedRegion('ÏàòÏõêÏãú');\n      const defaultLibraries = generateLibrariesByRegion('ÏàòÏõêÏãú');\n      setLibraries(defaultLibraries);\n    }\n\n    try {\n      const results = await searchBooksAPI(query, 1, 20);\n      \n      if (results && results.length > 0) {\n        setApiStatus('‚úÖ Ïã§Ï†ú ÎèÑÏÑúÍ¥Ä Îç∞Ïù¥ÌÑ∞Î°ú Í≤ÄÏÉâ ÏôÑÎ£å');\n        \n        const currentLibraries = libraries.length > 0 ? libraries : generateLibrariesByRegion('ÏàòÏõêÏãú');\n        const booksWithAvailability = results.map(book => ({\n          ...book,\n          availability: generateLibraryAvailability(currentLibraries)\n        }));\n        \n        setSearchResults(booksWithAvailability);\n      } else {\n        setApiStatus('‚ö†Ô∏è ÎèÑÏÑúÍ¥Ä API Ïó∞Í≤∞ Ï§ë - ÏÉòÌîå Îç∞Ïù¥ÌÑ∞ Ï†úÍ≥µ');\n        const dummyResults = getDummySearchResults(query);\n        setSearchResults(dummyResults);\n      }\n    } catch (error) {\n      console.error('Í≤ÄÏÉâ Ï§ë Ïò§Î•ò:', error);\n      setApiError('API Ïó∞Í≤∞ Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§. ÏÉòÌîå Îç∞Ïù¥ÌÑ∞Î•º Ï†úÍ≥µÌï©ÎãàÎã§.');\n      setApiStatus('‚ö†Ô∏è API Ïó∞Í≤∞ Ïò§Î•ò - ÏïàÏ†ïÏ†ÅÏù∏ ÏÑúÎπÑÏä§ Ï†úÍ≥µ');\n      \n      const dummyResults = getDummySearchResults(query);\n      setSearchResults(dummyResults);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ÎçîÎØ∏ Í≤ÄÏÉâ Í≤∞Í≥º ÏÉùÏÑ±\n  const getDummySearchResults = (query: string): Book[] => {\n    const dummyBooks = [\n      {\n        id: '1',\n        title: 'Ìï¥Î¶¨Ìè¨ÌÑ∞ÏôÄ ÎßàÎ≤ïÏÇ¨Ïùò Îèå',\n        author: 'J.K. Î°§ÎßÅ',\n        publisher: 'Î¨∏ÌïôÏàòÏ≤©',\n        isbn: '9788983920072',\n        category: 'ÏÜåÏÑ§',\n        publishYear: '1997',\n        description: 'Ï†Ñ ÏÑ∏Í≥ÑÎ•º ÏÇ¨Î°úÏû°ÏùÄ ÎßàÎ≤ïÏùò Ïù¥ÏïºÍ∏∞ Ï≤´ Î≤àÏß∏ Í∂å',\n        loanCount: 3421\n      },\n      {\n        id: '2',\n        title: 'Ìï¥Î¶¨Ìè¨ÌÑ∞ÏôÄ ÎπÑÎ∞ÄÏùò Î∞©',\n        author: 'J.K. Î°§ÎßÅ',\n        publisher: 'Î¨∏ÌïôÏàòÏ≤©',\n        isbn: '9788983920089',\n        category: 'ÏÜåÏÑ§',\n        publishYear: '1998',\n        description: 'Ìï¥Î¶¨Ìè¨ÌÑ∞ ÏãúÎ¶¨Ï¶à Îëê Î≤àÏß∏ Í∂å',\n        loanCount: 2987\n      },\n      {\n        id: '3',\n        title: 'ÎØ∏ÏõÄÎ∞õÏùÑ Ïö©Í∏∞',\n        author: 'Í∏∞ÏãúÎØ∏ Ïù¥ÏπòÎ°ú, Í≥†Í∞Ä ÌõÑÎØ∏ÌÉÄÏºÄ',\n        publisher: 'Ïù∏ÌîåÎ£®ÏóîÏÖú',\n        isbn: '9788950955671',\n        category: 'ÏûêÍ∏∞Í≥ÑÎ∞ú',\n        publishYear: '2014',\n        description: 'ÏïÑÎì§Îü¨ Ïã¨Î¶¨ÌïôÏùÑ Î∞îÌÉïÏúºÎ°ú Ìïú Ïù∏Í∞ÑÍ¥ÄÍ≥ÑÏôÄ ÏÇ∂Ïùò ÏßÄÌòúÎ•º Îã¥ÏùÄ Ï±Ö',\n        loanCount: 2847\n      },\n      {\n        id: '4',\n        title: '82ÎÖÑÏÉù ÍπÄÏßÄÏòÅ',\n        author: 'Ï°∞ÎÇ®Ï£º',\n        publisher: 'ÎØºÏùåÏÇ¨',\n        isbn: '9788937473371',\n        category: 'ÏÜåÏÑ§',\n        publishYear: '2016',\n        description: 'ÌïúÍµ≠ Ïó¨ÏÑ±Ïùò ÌòÑÏã§ÏùÑ ÏÉùÏÉùÌïòÍ≤å Í∑∏Î¶∞ ÏÜåÏÑ§',\n        loanCount: 1923\n      },\n      {\n        id: '5',\n        title: 'ÏÇ¨ÌîºÏóîÏä§',\n        author: 'Ïú†Î∞ú ÌïòÎùºÎ¶¨',\n        publisher: 'ÍπÄÏòÅÏÇ¨',\n        isbn: '9788934972464',\n        category: 'Ïù∏Î¨∏',\n        publishYear: '2015',\n        description: 'Ïù∏Î•òÏùò Ïó≠ÏÇ¨Î•º ÌÜµÏ∞∞Ìïú Î≤†Ïä§Ìä∏ÏÖÄÎü¨',\n        loanCount: 1456\n      },\n      {\n        id: '6',\n        title: 'ÏõêÌîºÏä§ 1Í∂å',\n        author: 'Ïò§Îã§ ÏóêÏù¥ÏπòÎ°ú',\n        publisher: 'ÎåÄÏõêÏî®ÏïÑÏù¥',\n        isbn: '9788925208015',\n        category: 'ÎßåÌôî',\n        publishYear: '1997',\n        description: 'Ìï¥Ï†ÅÏôïÏùÑ ÍøàÍæ∏Îäî Î£®ÌîºÏùò Î™®Ìóò',\n        loanCount: 1234\n      }\n    ];\n\n    const filtered = dummyBooks.filter(book =>\n      book.title.toLowerCase().includes(query.toLowerCase()) ||\n      book.author.toLowerCase().includes(query.toLowerCase()) ||\n      book.category.toLowerCase().includes(query.toLowerCase())\n    );\n\n    // Îß§Ïπ≠ÎêòÎäî Í≤∞Í≥ºÎßå Î∞òÌôò (Îß§Ïπ≠ÎêòÏßÄ ÏïäÏúºÎ©¥ Îπà Î∞∞Ïó¥)\n    return filtered.map(book => ({\n      ...book,\n      availability: generateLibraryAvailability(libraries)\n    }));\n  };\n\n  // Í≤ÄÏÉâ Ìèº Ï†úÏ∂ú\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchTerm.trim()) {\n      // ÏÉàÎ°úÏö¥ Í≤ÄÏÉâ Ïãú Í∏∞Ï°¥ Í≤∞Í≥º Î∞è ÏßÄÏó≠ ÏÑ†ÌÉù Î¶¨ÏÖã\n      setSearchResults([]);\n      setHasSearched(false);\n      setSelectedRegion('');\n      setLibraries([]);\n      \n      saveRecentSearch(searchTerm.trim());\n      performSearch(searchTerm.trim());\n    }\n  };\n\n  // ÏòàÏïΩ Ï≤òÎ¶¨\n  const handleReserve = (bookId: string, libraryId: number, libraryName: string, libraryPhone: string, libraryHours: string = '', isAvailable: boolean, availableBooks: number = 0, totalBooks: number = 0) => {\n    // ÏòàÏïΩ ÎåÄÍ∏∞Îßå ÏûàÎäî Í≤ΩÏö∞ (availableBooks === 0 && totalBooks > 0) Î∞îÎ°ú Ï†ÑÌôî Ïó∞Í≤∞\n    if (availableBooks === 0 && totalBooks > 0) {\n      alert('ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÌïòÏó¨ ÎåÄÍ∏∞Ïã†Ï≤≠ÏùÑ ÏßÑÌñâÌïòÍ≤†ÏäµÎãàÎã§.');\n      window.location.href = `tel:${libraryPhone}`;\n      return;\n    }\n\n    const currentTime = new Date();\n    const currentHour = currentTime.getHours();\n    const isOpen = currentHour >= 9 && currentHour < 18;\n    \n    let message = '';\n    if (isAvailable) {\n      message = `${libraryName}ÏóêÏÑú Ïù¥ ÎèÑÏÑúÎ•º ÏòàÏïΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;\n    } else {\n      message = `${libraryName}Ïóê ÎåÄÍ∏∞Ïã†Ï≤≠ÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;\n    }\n    \n    message += `\\n\\nüìû Ï†ÑÌôîÎ≤àÌò∏: ${libraryPhone}`;\n    if (libraryHours) {\n      message += `\\n‚è∞ Ïö¥ÏòÅÏãúÍ∞Ñ: ${libraryHours}`;\n    }\n    \n    if (!isOpen) {\n      message += `\\n\\n‚ö†Ô∏è ÌòÑÏû¨ ÏãúÍ∞ÑÏùÄ ÎèÑÏÑúÍ¥Ä Ïö¥ÏòÅÏãúÍ∞Ñ Ïô∏ÏûÖÎãàÎã§.`;\n      message += `\\nÏö¥ÏòÅÏãúÍ∞ÑÏóê Îã§Ïãú Ï†ÑÌôîÌï¥Ï£ºÏÑ∏Ïöî.`;\n    }\n    \n    const confirmed = window.confirm(message);\n    if (confirmed) {\n      if (isAvailable) {\n        alert('ÏòàÏïΩ ÌôïÏù∏ÏùÑ ÏúÑÌï¥ ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.');\n      } else {\n        alert('ÎåÄÍ∏∞Ïã†Ï≤≠ ÌôïÏù∏ÏùÑ ÏúÑÌï¥ ÎèÑÏÑúÍ¥ÄÏóê ÏßÅÏ†ë Ï†ÑÌôîÎìúÎ¶¨Í≤†ÏäµÎãàÎã§.');\n      }\n      window.location.href = `tel:${libraryPhone}`;\n    }\n  };\n\n  // Ïô∏Î∂Ä Í≤ÄÏÉâÏñ¥ Ï≤òÎ¶¨\n  useEffect(() => {\n    if (externalSearchQuery && externalSearchQuery.trim()) {\n      setSearchTerm(externalSearchQuery);\n      performSearch(externalSearchQuery);\n      if (onExternalSearchComplete) {\n        onExternalSearchComplete();\n      }\n    }\n  }, [externalSearchQuery, onExternalSearchComplete, performSearch]);\n\n  // Î∂ÄÎ™®ÏóêÏÑú Ï†ÑÎã¨Î∞õÏùÄ ÏßÄÏó≠ Ï†ïÎ≥¥ ÎèôÍ∏∞Ìôî\n  useEffect(() => {\n    if (parentSelectedRegion !== undefined) {\n      setSelectedRegion(parentSelectedRegion);\n    }\n  }, [parentSelectedRegion]);\n\n  // ÏßÄÏó≠ ÏÑ†ÌÉù Ï≤òÎ¶¨\n  useEffect(() => {\n    if (selectedRegion) {\n      const regionLibraries = generateLibrariesByRegion(selectedRegion);\n      setLibraries(regionLibraries);\n    }\n  }, [selectedRegion]);\n\n\n\n  // ÏßÄÏó≠Ïù¥ Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í≤ÄÏÉâ Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏\n  const updateSearchResultsWithLibraries = React.useCallback((newLibraries: Library[]) => {\n    setSearchResults(prevResults => {\n      if (prevResults.length > 0 && newLibraries.length > 0) {\n        return prevResults.map(book => ({\n          ...book,\n          availability: generateLibraryAvailability(newLibraries)\n        }));\n      }\n      return prevResults;\n    });\n  }, []);\n\n  // ÎèÑÏÑúÍ¥Ä Ï†ïÎ≥¥Í∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßàÎã§ Í≤ÄÏÉâ Í≤∞Í≥º ÏóÖÎç∞Ïù¥Ìä∏\n  useEffect(() => {\n    if (libraries.length > 0) {\n      updateSearchResultsWithLibraries(libraries);\n    }\n  }, [libraries, updateSearchResultsWithLibraries]); // librariesÍ∞Ä Î≥ÄÍ≤ΩÎê† ÎïåÎßå Ïã§Ìñâ\n\n  return (\n    <Container>\n      <SearchForm onSubmit={handleSearch}>\n        <SearchInputContainer>\n          <SearchInput\n            type=\"text\"\n            placeholder=\"Ï∞æÏúºÏãúÎäî ÎèÑÏÑúÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî\"\n            value={searchTerm}\n            onChange={handleSearchInputChange}\n            onFocus={handleSearchInputFocus}\n            onBlur={handleAutocompleteClose}\n          />\n          {showAutocomplete && autocompleteItems.length > 0 && (\n            <AutocompleteDropdown>\n              {autocompleteItems.map((item, index) => (\n                <AutocompleteItemElement key={index} onClick={() => handleAutocompleteSelect(item)}>\n                  <span className=\"icon\">\n                    {item.type === 'recent' ? 'üïê' : item.type === 'popular' ? 'üî•' : 'üí°'}\n                  </span>\n                  <span className=\"text\">{item.text}</span>\n                  <span className=\"category\">{item.category}</span>\n                </AutocompleteItemElement>\n              ))}\n            </AutocompleteDropdown>\n          )}\n        </SearchInputContainer>\n        <SearchButton type=\"submit\" disabled={loading}>\n          {loading ? 'Í≤ÄÏÉâ Ï§ë...' : 'üîç Í≤ÄÏÉâ'}\n        </SearchButton>\n      </SearchForm>\n\n      {/* Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏûàÏùÑ ÎïåÎßå ÏßÄÏó≠ ÏÑ†ÌÉùÍ∏∞ ÌëúÏãú */}\n      {searchResults.length > 0 && (\n        <div style={{ marginBottom: '20px' }}>\n          <RegionSelector \n            onLibrariesUpdate={setLibraries} \n            selectedRegion={selectedRegion} \n            onRegionUpdate={(region) => {\n              setSelectedRegion(region);\n              if (onRegionUpdate) {\n                onRegionUpdate(region);\n              }\n              // ÏßÄÏó≠ Î≥ÄÍ≤Ω Ïãú Ï¶âÏãú ÎèÑÏÑúÍ¥Ä Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏\n              const regionLibraries = generateLibrariesByRegion(region);\n              setLibraries(regionLibraries);\n            }} \n          />\n        </div>\n      )}\n\n\n\n      {apiStatus && (\n        <ApiStatus isError={!!apiError}>\n          {apiStatus}\n        </ApiStatus>\n      )}\n\n      {loading && (\n        <LoadingDiv>\n          üìö Ïã§Ï†ú ÎèÑÏÑúÍ¥Ä APIÏóêÏÑú Í≤ÄÏÉâÌïòÍ≥† ÏûàÏäµÎãàÎã§...\n        </LoadingDiv>\n      )}\n\n      {!loading && hasSearched && searchResults.length === 0 && (\n        <EmptyState>\n          <div className=\"emoji\">üìñ</div>\n          <div className=\"title\">Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§</div>\n          <div className=\"subtitle\">Îã§Î•∏ ÌÇ§ÏõåÎìúÎ°ú Í≤ÄÏÉâÌï¥Î≥¥ÏÑ∏Ïöî</div>\n        </EmptyState>\n      )}\n\n      {!loading && searchResults.length > 0 && (\n        <SearchResults>\n          {searchResults.map((book) => (\n            <BookCard key={book.id}>\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '15px' }}>\n                <BookTitle>{book.title}</BookTitle>\n                <button\n                  onClick={() => toggleBookmark(book.id)}\n                  style={{\n                    background: 'none',\n                    border: 'none',\n                    fontSize: '24px',\n                    cursor: 'pointer',\n                    color: isBookmarked(book.id) ? '#ff6b6b' : '#ccc',\n                    transition: 'color 0.3s'\n                  }}\n                  title={isBookmarked(book.id) ? 'Ï¶êÍ≤®Ï∞æÍ∏∞ Ìï¥Ï†ú' : 'Ï¶êÍ≤®Ï∞æÍ∏∞ Ï∂îÍ∞Ä'}\n                >\n                  {isBookmarked(book.id) ? '‚ù§Ô∏è' : 'ü§ç'}\n                </button>\n              </div>\n              <BookInfo>\n                <span>Ï†ÄÏûê: {book.author}</span>\n                <span>Ï∂úÌåêÏÇ¨: {book.publisher}</span>\n                <span>Ïπ¥ÌÖåÍ≥†Î¶¨: {book.category}</span>\n                <span>Ï∂úÍ∞ÑÎÖÑÎèÑ: {book.publishYear}</span>\n                {book.loanCount && <span>ÎåÄÏ∂ú ÌöüÏàò: {book.loanCount.toLocaleString()}Ìöå</span>}\n              </BookInfo>\n              \n              {book.description && (\n                <BookDescription>\n                  {book.description}\n                </BookDescription>\n              )}\n              \n              {selectedRegion && (\n                <AvailabilitySection>\n                  <AvailabilityTitle>\n                    üìç {selectedRegion} ÎèÑÏÑúÍ¥Ä ÏÜåÏû• ÌòÑÌô©\n                  </AvailabilityTitle>\n                  <LibraryList>\n                    {book.availability\n                    .sort((a, b) => {\n                      if (a.available && !b.available) return -1;\n                      if (!a.available && b.available) return 1;\n                      if (a.available && b.available) return a.waitingList - b.waitingList;\n                      return a.waitingList - b.waitingList;\n                    })\n                    .map((avail) => (\n                    <LibraryItem key={avail.libraryId}>\n                      <LibraryHeader>\n                        <LibraryName>\n                          {avail.available ? '‚úÖ ' : '‚ùå '}\n                          {avail.libraryName}\n                        </LibraryName>\n                        <LibraryAddress>üìç {avail.libraryAddress}</LibraryAddress>\n                        <LibraryPhone>üìû {avail.libraryPhone}</LibraryPhone>\n                        <LibraryHours>‚è∞ {avail.libraryHours || '09:00-18:00'}</LibraryHours>\n                      </LibraryHeader>\n                      <LibraryStats>\n                        {avail.availableBooks > 0 && (\n                          <div style={{ \n                            background: '#e8f5e8', \n                            border: '1px solid #4CAF50',\n                            borderRadius: '8px',\n                            padding: '12px',\n                            marginBottom: '10px'\n                          }}>\n                            <div style={{ \n                              display: 'flex', \n                              alignItems: 'center', \n                              gap: '8px',\n                              marginBottom: '8px',\n                              fontWeight: 'bold',\n                              color: '#2e7d32'\n                            }}>\n                              üìñ ÎåÄÏ∂ú Í∞ÄÎä•Ìïú ÎèÑÏÑú ÏúÑÏπò\n                            </div>\n                            <div style={{ \n                              fontSize: '14px',\n                              color: '#1b5e20',\n                              lineHeight: '1.4'\n                            }}>\n                              üìç {avail.location}\n                            </div>\n                            <div style={{ \n                              fontSize: '14px',\n                              color: '#2e7d32',\n                              marginTop: '4px'\n                            }}>\n                              ‚úÖ ÎåÄÏ∂ú Í∞ÄÎä• {avail.availableBooks}Í∂å\n                            </div>\n                          </div>\n                        )}\n                      </LibraryStats>\n                      \n                      {avail.availableBooks === 0 && avail.totalBooks > 0 && (\n                        <div style={{ \n                          background: '#e8f5e8', \n                          border: '1px solid #4CAF50',\n                          borderRadius: '8px',\n                          padding: '12px',\n                          margin: '10px 0',\n                          fontSize: '14px',\n                          color: '#2e7d32'\n                        }}>\n                          üìû ÌòÑÏû¨ Î™®Îì† ÎèÑÏÑúÍ∞Ä ÎåÄÏ∂ú Ï§ëÏûÖÎãàÎã§.\n                        </div>\n                      )}\n                      \n                      {avail.totalBooks === 0 && (\n                        <div style={{ \n                          background: '#f8d7da', \n                          border: '1px solid #f5c6cb',\n                          borderRadius: '8px',\n                          padding: '12px',\n                          margin: '10px 0',\n                          fontSize: '14px',\n                          color: '#721c24'\n                        }}>\n                          ‚ùå Ïù¥ ÎèÑÏÑúÍ¥ÄÏóêÎäî Ìï¥Îãπ ÎèÑÏÑúÍ∞Ä ÏÜåÏû•ÎêòÏñ¥ ÏûàÏßÄ ÏïäÏäµÎãàÎã§.\n                        </div>\n                      )}\n                      \n                      <div style={{ \n                        display: 'flex', \n                        justifyContent: 'space-between', \n                        alignItems: 'center',\n                        marginBottom: '10px'\n                      }}>\n                        {avail.waitingList > 0 && (\n                          <div style={{ \n                            fontSize: '14px',\n                            fontWeight: 'bold',\n                            color: 'var(--accent-color)',\n                            display: 'flex',\n                            alignItems: 'center',\n                            gap: '6px'\n                          }}>\n                            ‚è≥ ÏòàÏïΩ ÎåÄÍ∏∞ {avail.waitingList}Î™Ö\n                          </div>\n                        )}\n                        <div style={{ marginLeft: 'auto' }}>\n                          <ReserveButton \n                            available={avail.available || (avail.availableBooks === 0 && avail.totalBooks > 0)}\n                            onClick={() => handleReserve(\n                              book.id,\n                              avail.libraryId,\n                              avail.libraryName,\n                              avail.libraryPhone,\n                              avail.libraryHours || '09:00-18:00',\n                              avail.available,\n                              avail.availableBooks,\n                              avail.totalBooks\n                            )}\n                            disabled={avail.totalBooks === 0}\n                          >\n                            {avail.totalBooks === 0 ? 'üìµ ÏÜåÏû• ÏóÜÏùå' : 'üìñ Î∞îÎ°ú ÏòàÏïΩ'}\n                          </ReserveButton>\n                        </div>\n                      </div>\n                    </LibraryItem>\n                  ))}\n                </LibraryList>\n              </AvailabilitySection>\n            )}\n            </BookCard>\n          ))}\n        </SearchResults>\n      )}\n    </Container>\n  );\n};\n\nexport default BookSearchSection;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,cAAc,CAAEC,sBAAsB,KAAQ,wBAAwB,CAE/E;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,KAAM,CAAAC,SAAS,CAAGR,MAAM,CAACS,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGV,MAAM,CAACW,IAAI;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAGZ,MAAM,CAACS,GAAG;AACvC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,WAAW,CAAGb,MAAM,CAACc,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAGf,MAAM,CAACS,GAAG;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAO,uBAAuB,CAAGhB,MAAM,CAACS,GAAG;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAGjB,MAAM,CAACkB,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAID,KAAM,CAAAC,UAAU,CAAGnB,MAAM,CAACS,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAW,UAAU,CAAGpB,MAAM,CAACS,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAY,aAAa,CAAGrB,MAAM,CAACS,GAAG;AAChC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,QAAQ,CAAGtB,MAAM,CAACS,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAc,SAAS,CAAGvB,MAAM,CAACwB,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGzB,MAAM,CAACS,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAiB,eAAe,CAAG1B,MAAM,CAAC2B,CAAC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,mBAAmB,CAAG5B,MAAM,CAACS,GAAG;AACtC;AACA;AACA,CAAC,CAED,KAAM,CAAAoB,iBAAiB,CAAG7B,MAAM,CAAC8B,EAAE;AACnC;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAG/B,MAAM,CAACS,GAAG;AAC9B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAuB,WAAW,CAAGhC,MAAM,CAACS,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAwB,aAAa,CAAGjC,MAAM,CAACS,GAAG;AAChC;AACA;AACA,CAAC,CAED,KAAM,CAAAyB,WAAW,CAAGlC,MAAM,CAAC8B,EAAE;AAC7B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAK,cAAc,CAAGnC,MAAM,CAAC2B,CAAC;AAC/B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,YAAY,CAAGpC,MAAM,CAAC2B,CAAC;AAC7B;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}