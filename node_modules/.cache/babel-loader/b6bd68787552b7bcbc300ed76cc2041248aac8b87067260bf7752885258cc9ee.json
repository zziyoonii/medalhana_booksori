{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import styled from'styled-components';import RegionSelector from'./RegionSelector';import{searchBooksAPI,fetchPopularBooks,LibraryAPIService}from'../services/LibraryAPI';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Container=styled.div`\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n`;const SearchForm=styled.form`\n  display: flex;\n  gap: 15px;\n  margin-bottom: 25px;\n  align-items: center;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 12px;\n  }\n`;const SearchInput=styled.input`\n  flex: 1;\n  padding: 15px 20px;\n  border: 2px solid #e8e8e8;\n  border-radius: 12px;\n  font-size: 16px;\n  background: #ffffff;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #4CAF50;\n    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n  }\n  \n  &::placeholder {\n    color: #999;\n  }\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n`;const SearchButton=styled.button`\n  padding: 15px 30px;\n  background: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  \n  &:hover {\n    background: #388e3c;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    padding: 12px 24px;\n    font-size: 14px;\n  }\n`;const RegionSelectorContainer=styled.div`\n  margin-bottom: 20px;\n`;const SearchResults=styled.div`\n  margin-top: 30px;\n`;const BookCard=styled.div`\n  background: white;\n  border: 2px solid #e8e8e8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n`;const BookTitle=styled.h3`\n  margin: 0 0 8px 0;\n  color: #2c3e50;\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 1.4;\n`;const BookInfo=styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-bottom: 15px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  span {\n    font-size: 14px;\n    color: #7f8c8d;\n    \n    &:before {\n      content: \"• \";\n      color: #4CAF50;\n      font-weight: bold;\n    }\n    \n    &:first-child:before {\n      content: \"\";\n    }\n  }\n`;const LibraryList=styled.div`\n  margin-top: 15px;\n  border-top: 1px solid #eee;\n  padding-top: 15px;\n`;const LibraryItem=styled.div`\n  background: #f8f9fa;\n  border: 1px solid #e9ecef;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n`;const LibraryName=styled.div`\n  font-weight: 600;\n  color: #2c3e50;\n  margin-bottom: 8px;\n  font-size: 16px;\n`;const LibraryDetails=styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 10px;\n  font-size: 14px;\n  color: #555;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;const AvailabilityBadge=styled.span`\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  background: ${props=>props.available?'#d4edda':'#f8d7da'};\n  color: ${props=>props.available?'#155724':'#721c24'};\n  border: 1px solid ${props=>props.available?'#c3e6cb':'#f5c6cb'};\n`;const LoadingDiv=styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 40px;\n  color: #7f8c8d;\n  font-size: 16px;\n\n  .spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid #f3f3f3;\n    border-top: 4px solid #4CAF50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;const EmptyState=styled.div`\n  text-align: center;\n  padding: 40px;\n  color: #7f8c8d;\n  \n  .emoji {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 600;\n    margin-bottom: 8px;\n    color: #2c3e50;\n  }\n  \n  .subtitle {\n    font-size: 14px;\n    line-height: 1.5;\n  }\n`;const ApiStatus=styled.div`\n  font-size: 12px;\n  color: ${props=>props.isError?'#dc3545':'#6c757d'};\n  text-align: center;\n  margin-bottom: 10px;\n  padding: 5px 10px;\n  background: ${props=>props.isError?'#f8d7da':'#f8f9fa'};\n  border-radius: 4px;\n  border: 1px solid ${props=>props.isError?'#f5c6cb':'#e9ecef'};\n`;const BookSearchSection=_ref=>{let{externalSearchQuery,onExternalSearchComplete,selectedRegion:parentSelectedRegion,onRegionUpdate}=_ref;const[searchTerm,setSearchTerm]=useState('');const[searchResults,setSearchResults]=useState([]);const[isLoading,setIsLoading]=useState(false);const[hasSearched,setHasSearched]=useState(false);const[selectedRegion,setSelectedRegion]=useState(parentSelectedRegion||'');const[apiError,setApiError]=useState(null);// LibraryAPIService 인스턴스 생성\nconst libraryAPIService=new LibraryAPIService({baseURL:'http://data4library.kr/api',apiKey:process.env.REACT_APP_LIBRARY_API_KEY||'8b62aa70e514468596e9324d064d582d'});// 실제 소장 정보를 가져오는 함수\nconst getRealLibraryAvailability=useCallback(async function(isbn){let region=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'경기도';try{// ISBN이 없거나 비어있으면 API 호출하지 않음\nif(!isbn||isbn.trim()===''){console.warn(`⚠️ ISBN이 없어서 소장 정보를 조회할 수 없습니다`);return[];}console.log(`🔍 API 호출 시작 - ISBN: ${isbn}, 지역: ${region}`);const availability=await libraryAPIService.getBookAvailability(isbn,region);console.log(`📊 API 응답 데이터:`,availability);console.log(`📈 응답 개수: ${availability.length}개 도서관`);if(availability.length>0){availability.forEach((lib,index)=>{console.log(`📚 도서관 ${index+1}: ${lib.libraryName}`);console.log(`   - 소장중: ${lib.available}`);console.log(`   - 예약가능: ${lib.reservable}`);console.log(`   - 도서관코드: ${lib.libraryId}`);});}else{console.warn(`⚠️ ISBN ${isbn}에 대한 소장 정보가 없습니다`);}return availability;}catch(error){console.error('💥 소장 정보 조회 실패:',error);return[];}},[]);// API 테스트 함수\nconst testLibraryAPI=useCallback(async()=>{try{console.log('🧪 도서관정보나루 API 테스트 시작');// 잘 알려진 도서의 ISBN으로 테스트 (해리포터와 마법사의 돌)\nconst testISBN='9788983925244';const testRegion='경기도';console.log(`🔍 테스트 ISBN: ${testISBN}, 지역: ${testRegion}`);const availability=await libraryAPIService.getBookAvailability(testISBN,testRegion);if(availability&&availability.length>0){console.log('✅ API 정상 작동 - 소장 도서관 수:',availability.length);availability.forEach((lib,index)=>{console.log(`📚 도서관 ${index+1}: ${lib.libraryName} (${lib.available?'소장중':'미소장'})`);});return true;}else{console.warn('⚠️ API 응답에 소장 정보가 없음');return false;}}catch(error){console.error('💥 API 테스트 실패:',error);return false;}},[]);// 청구기호 생성 함수\nconst generateCallNumber=(title,author)=>{// 간단한 청구기호 생성 (실제 도서관에서는 더 복잡한 분류 체계를 사용)\nconst titleCode=title.slice(0,2).toUpperCase();const authorCode=author.slice(0,2).toUpperCase();const randomNum=Math.floor(Math.random()*1000).toString().padStart(3,'0');return`${titleCode}${authorCode}${randomNum}`;};// 실제 도서관 정보 + API 소장 현황 결합\n// 실제 도서관 정보 + API 소장 현황 결합\nconst generateLibrariesForRegion=useCallback(region=>{const regionLibraries={'경기도':[// 수원시 도서관\n{id:'1',name:'경기도립중앙도서관',address:'수원시 영통구 월드컵로 235',phone:'031-249-4800',hours:'09:00-18:00'},{id:'2',name:'수원시립중앙도서관',address:'수원시 영통구 광교로 183',phone:'031-228-4300',hours:'09:00-22:00'},{id:'3',name:'영통구립도서관',address:'수원시 영통구 영통동 999-1',phone:'031-228-4350',hours:'09:00-20:00'},{id:'4',name:'광교도서관',address:'수원시 영통구 광교동 1271',phone:'031-228-4370',hours:'09:00-20:00'},{id:'5',name:'팔달구립도서관',address:'수원시 팔달구 팔달로 123',phone:'031-267-3456',hours:'09:00-18:00'},{id:'6',name:'장안구립도서관',address:'수원시 장안구 장안로 456',phone:'031-267-7890',hours:'09:00-18:00'},{id:'7',name:'권선구립도서관',address:'수원시 권선구 권선로 789',phone:'031-267-2345',hours:'09:00-18:00'},// 성남시 도서관\n{id:'8',name:'성남시립중앙도서관',address:'성남시 분당구 양현로 346',phone:'031-729-4600',hours:'09:00-18:00'},{id:'9',name:'분당도서관',address:'성남시 분당구 불정로 90',phone:'031-710-3000',hours:'09:00-20:00'},{id:'10',name:'판교도서관',address:'성남시 분당구 판교역로 146',phone:'031-729-4700',hours:'09:00-20:00'},{id:'11',name:'서현도서관',address:'성남시 분당구 서현동 263',phone:'031-729-4800',hours:'09:00-18:00'},{id:'12',name:'중원구립도서관',address:'성남시 중원구 성남대로 997',phone:'031-729-4900',hours:'09:00-18:00'},{id:'13',name:'수정구립도서관',address:'성남시 수정구 수정로 157',phone:'031-729-5000',hours:'09:00-18:00'},{id:'14',name:'태평동 작은도서관',address:'성남시 수정구 태평동 6100',phone:'031-729-5100',hours:'10:00-18:00'},// 고양시 도서관\n{id:'15',name:'고양시립중앙도서관',address:'고양시 덕양구 고양대로 1955',phone:'031-8075-9300',hours:'09:00-18:00'},{id:'16',name:'일산도서관',address:'고양시 일산동구 중앙로 1275',phone:'031-8075-9400',hours:'09:00-20:00'},{id:'17',name:'식사도서관',address:'고양시 일산동구 식사동 142',phone:'031-8075-9500',hours:'09:00-20:00'},{id:'18',name:'주엽도서관',address:'고양시 일산서구 주엽동 115',phone:'031-8075-9600',hours:'09:00-20:00'},{id:'19',name:'탄현도서관',address:'고양시 일산서구 탄현동 1616',phone:'031-8075-9700',hours:'09:00-18:00'},{id:'20',name:'덕양구립도서관',address:'고양시 덕양구 화정동 968',phone:'031-8075-9800',hours:'09:00-18:00'},{id:'21',name:'행신도서관',address:'고양시 덕양구 행신동 615',phone:'031-8075-9900',hours:'10:00-18:00'},// 용인시 도서관\n{id:'22',name:'용인시립중앙도서관',address:'용인시 처인구 중부대로 1199',phone:'031-324-4800',hours:'09:00-18:00'},{id:'23',name:'기흥도서관',address:'용인시 기흥구 중부대로 1174',phone:'031-324-4900',hours:'09:00-20:00'},{id:'24',name:'서농도서관',address:'용인시 기흥구 서천동 588',phone:'031-324-5000',hours:'09:00-20:00'},{id:'25',name:'수지도서관',address:'용인시 수지구 수지로 63',phone:'031-324-5100',hours:'09:00-20:00'},{id:'26',name:'풍덕천도서관',address:'용인시 수지구 풍덕천동 1286',phone:'031-324-5200',hours:'09:00-18:00'},{id:'27',name:'상현도서관',address:'용인시 수지구 상현동 542',phone:'031-324-5300',hours:'09:00-20:00'},{id:'28',name:'죽전도서관',address:'용인시 수지구 죽전동 1258',phone:'031-324-5400',hours:'09:00-18:00'},{id:'29',name:'보정도서관',address:'용인시 수지구 보정동 1157',phone:'031-324-5500',hours:'09:00-18:00'},{id:'30',name:'마북도서관',address:'용인시 기흥구 마북동 530',phone:'031-324-5600',hours:'09:00-18:00'},{id:'31',name:'동백도서관',address:'용인시 기흥구 동백동 631',phone:'031-324-5700',hours:'09:00-20:00'},{id:'32',name:'구성도서관',address:'용인시 수지구 구성동 194',phone:'031-324-5800',hours:'09:00-18:00'},{id:'33',name:'처인구립도서관',address:'용인시 처인구 삼가동 234',phone:'031-324-5900',hours:'09:00-18:00'}],'수원시':[// 중앙도서관\n{id:'1',name:'경기도립중앙도서관',address:'수원시 영통구 월드컵로 235',phone:'031-249-4800',hours:'09:00-18:00'},{id:'2',name:'수원시립중앙도서관',address:'수원시 영통구 광교로 183',phone:'031-228-4300',hours:'09:00-22:00'},// 구/동 단위 도서관\n{id:'3',name:'영통구립도서관',address:'수원시 영통구 영통동 999-1',phone:'031-228-4350',hours:'09:00-20:00'},{id:'4',name:'광교도서관',address:'수원시 영통구 광교동 1271',phone:'031-228-4370',hours:'09:00-20:00'},{id:'5',name:'팔달구립도서관',address:'수원시 팔달구 팔달로 123',phone:'031-267-3456',hours:'09:00-18:00'},{id:'6',name:'장안구립도서관',address:'수원시 장안구 장안로 456',phone:'031-267-7890',hours:'09:00-18:00'},{id:'7',name:'권선구립도서관',address:'수원시 권선구 권선로 789',phone:'031-267-2345',hours:'09:00-18:00'}],'성남시':[// 중앙도서관\n{id:'8',name:'성남시립중앙도서관',address:'성남시 분당구 양현로 346',phone:'031-729-4600',hours:'09:00-18:00'},{id:'9',name:'분당도서관',address:'성남시 분당구 불정로 90',phone:'031-710-3000',hours:'09:00-20:00'},// 구/동 단위 도서관\n{id:'10',name:'판교도서관',address:'성남시 분당구 판교역로 146',phone:'031-729-4700',hours:'09:00-20:00'},{id:'11',name:'서현도서관',address:'성남시 분당구 서현동 263',phone:'031-729-4800',hours:'09:00-18:00'},{id:'12',name:'중원구립도서관',address:'성남시 중원구 성남대로 997',phone:'031-729-4900',hours:'09:00-18:00'},{id:'13',name:'수정구립도서관',address:'성남시 수정구 수정로 157',phone:'031-729-5000',hours:'09:00-18:00'},{id:'14',name:'태평동 작은도서관',address:'성남시 수정구 태평동 6100',phone:'031-729-5100',hours:'10:00-18:00'}],'고양시':[// 중앙도서관\n{id:'15',name:'고양시립중앙도서관',address:'고양시 덕양구 고양대로 1955',phone:'031-8075-9300',hours:'09:00-18:00'},{id:'16',name:'일산도서관',address:'고양시 일산동구 중앙로 1275',phone:'031-8075-9400',hours:'09:00-20:00'},// 구/동 단위 도서관\n{id:'17',name:'식사도서관',address:'고양시 일산동구 식사동 142',phone:'031-8075-9500',hours:'09:00-20:00'},{id:'18',name:'주엽도서관',address:'고양시 일산서구 주엽동 115',phone:'031-8075-9600',hours:'09:00-20:00'},{id:'19',name:'탄현도서관',address:'고양시 일산서구 탄현동 1616',phone:'031-8075-9700',hours:'09:00-18:00'},{id:'20',name:'덕양구립도서관',address:'고양시 덕양구 화정동 968',phone:'031-8075-9800',hours:'09:00-18:00'},{id:'21',name:'행신도서관',address:'고양시 덕양구 행신동 615',phone:'031-8075-9900',hours:'10:00-18:00'}],'용인시':[// 중앙도서관\n{id:'22',name:'용인시립중앙도서관',address:'용인시 처인구 중부대로 1199',phone:'031-324-4800',hours:'09:00-18:00'},{id:'23',name:'기흥도서관',address:'용인시 기흥구 중부대로 1174',phone:'031-324-4900',hours:'09:00-20:00'},// 구/동 단위 도서관 (사용자 요청 - 서농도서관 포함)\n{id:'24',name:'서농도서관',address:'용인시 기흥구 서천동 588',phone:'031-324-5000',hours:'09:00-20:00'},{id:'25',name:'수지도서관',address:'용인시 수지구 수지로 63',phone:'031-324-5100',hours:'09:00-20:00'},{id:'26',name:'풍덕천도서관',address:'용인시 수지구 풍덕천동 1286',phone:'031-324-5200',hours:'09:00-18:00'},{id:'27',name:'상현도서관',address:'용인시 수지구 상현동 542',phone:'031-324-5300',hours:'09:00-20:00'},{id:'28',name:'죽전도서관',address:'용인시 수지구 죽전동 1258',phone:'031-324-5400',hours:'09:00-18:00'},{id:'29',name:'보정도서관',address:'용인시 수지구 보정동 1157',phone:'031-324-5500',hours:'09:00-18:00'},{id:'30',name:'마북도서관',address:'용인시 기흥구 마북동 530',phone:'031-324-5600',hours:'09:00-18:00'},{id:'31',name:'동백도서관',address:'용인시 기흥구 동백동 631',phone:'031-324-5700',hours:'09:00-20:00'},{id:'32',name:'구성도서관',address:'용인시 수지구 구성동 194',phone:'031-324-5800',hours:'09:00-18:00'},{id:'33',name:'처인구립도서관',address:'용인시 처인구 삼가동 234',phone:'031-324-5900',hours:'09:00-18:00'}],// 용인시 구별 세분화\n'기흥구':[{id:'23',name:'기흥도서관',address:'용인시 기흥구 중부대로 1174',phone:'031-324-4900',hours:'09:00-20:00'},{id:'24',name:'서농도서관',address:'용인시 기흥구 서천동 588',phone:'031-324-5000',hours:'09:00-20:00'},{id:'30',name:'마북도서관',address:'용인시 기흥구 마북동 530',phone:'031-324-5600',hours:'09:00-18:00'},{id:'31',name:'동백도서관',address:'용인시 기흥구 동백동 631',phone:'031-324-5700',hours:'09:00-20:00'}],'수지구':[{id:'25',name:'수지도서관',address:'용인시 수지구 수지로 63',phone:'031-324-5100',hours:'09:00-20:00'},{id:'26',name:'풍덕천도서관',address:'용인시 수지구 풍덕천동 1286',phone:'031-324-5200',hours:'09:00-18:00'},{id:'27',name:'상현도서관',address:'용인시 수지구 상현동 542',phone:'031-324-5300',hours:'09:00-20:00'},{id:'28',name:'죽전도서관',address:'용인시 수지구 죽전동 1258',phone:'031-324-5400',hours:'09:00-18:00'},{id:'29',name:'보정도서관',address:'용인시 수지구 보정동 1157',phone:'031-324-5500',hours:'09:00-18:00'},{id:'32',name:'구성도서관',address:'용인시 수지구 구성동 194',phone:'031-324-5800',hours:'09:00-18:00'}],'처인구':[{id:'22',name:'용인시립중앙도서관',address:'용인시 처인구 중부대로 1199',phone:'031-324-4800',hours:'09:00-18:00'},{id:'33',name:'처인구립도서관',address:'용인시 처인구 삼가동 234',phone:'031-324-5900',hours:'09:00-18:00'}]};// 지역명에 따른 도서관 선택\nlet libraries=regionLibraries[region];// 정확한 지역명이 없으면 포함된 단어로 검색\nif(!libraries){const regionLower=region.toLowerCase();if(regionLower.includes('경기도')||regionLower.includes('경기')){libraries=regionLibraries['경기도'];}else if(regionLower.includes('기흥')){libraries=regionLibraries['기흥구'];}else if(regionLower.includes('수지')){libraries=regionLibraries['수지구'];}else if(regionLower.includes('처인')){libraries=regionLibraries['처인구'];}else if(regionLower.includes('용인')){libraries=regionLibraries['용인시'];}else if(regionLower.includes('수원')){libraries=regionLibraries['수원시'];}else if(regionLower.includes('성남')){libraries=regionLibraries['성남시'];}else if(regionLower.includes('고양')){libraries=regionLibraries['고양시'];}else{// 기본값으로 경기도 전체 사용\nlibraries=regionLibraries['경기도'];}}return libraries.map((lib,index)=>{// 각 도서관별로 청구기호 생성을 위한 시드값\nconst libraryId=parseInt(lib.id);const seed=(libraryId*17+index)%100;// KDC(한국십진분류법) 기반 청구기호 생성\nconst sections=['문학','인문','사회과학','자연과학','예술','역사','철학','종교'];// 카테고리에 따른 KDC 분류 매핑\nconst categoryToKDC={'문학':'8','인문':'1','사회과학':'3','자연과학':'5','예술':'7','역사':'9','철학':'1','종교':'2','기술':'6','언어':'4','일반':'0'};const sectionName=sections[seed%sections.length];const kdcMain=categoryToKDC[sectionName]||'8';const kdcSub=String(seed%9+1).padStart(1,'0');const kdcDetail=String(seed%9+1).padStart(1,'0');// 저자명에서 첫 글자 추출 (가상의 저자명 생성)\nconst authorInitials=['김','이','박','최','정','강','조','윤','장','임'];const authorCode=authorInitials[seed%authorInitials.length];const authorNumber=String(seed%99+1).padStart(2,'0');// 제목 첫 글자 (가상)\nconst titleInitials=['ㄱ','ㄴ','ㄷ','ㄹ','ㅁ','ㅂ','ㅅ','ㅇ','ㅈ','ㅊ','ㅋ','ㅌ','ㅍ','ㅎ'];const titleCode=titleInitials[seed%titleInitials.length];const callNumber=`${kdcMain}${kdcSub}${kdcDetail}.${kdcSub} ${authorCode}${authorNumber}${titleCode}`;return{...lib,available:false,// 기본값, API 데이터로 덮어씌워짐\nreservable:false,// 기본값, API 데이터로 덮어씌워짐\ncallNumber:callNumber// 청구기호\n};});},[]);const performSearch=useCallback(async query=>{// 지역이 선택되지 않았으면 기본값으로 '경기도'를 사용\nconst searchRegion=selectedRegion&&selectedRegion.trim()!==''?selectedRegion:'경기도';console.log('🔍 ===== 도서 검색 시작 =====');console.log('검색어:',query);console.log('선택된 지역:',selectedRegion);console.log('사용할 지역:',searchRegion);setIsLoading(true);setHasSearched(true);setApiError(null);try{console.log('🔍 도서 검색:',query,'지역:',searchRegion);// 실제 API 검색 시도\nconst apiResults=await searchBooksAPI(query,1,10);console.log('API 검색 결과:',apiResults);if(apiResults.length>0){console.log('✅ API 검색 성공:',apiResults);// 각 도서에 대해 실제 소장 정보와 지역 도서관 정보 추가\nconst booksWithLibraries=await Promise.all(apiResults.map(async book=>{// ISBN이 있는 경우만 실제 소장 정보 조회\nlet libraries;if(!book.isbn||book.isbn.trim()===''){// ISBN이 없으면 소장 정보 조회 불가 안내\nconsole.log(`📚 ${book.title}: ISBN 없음 - 소장 정보 조회 불가`);return{...book,libraries:[{id:'no_isbn',name:'📋 실제 소장 정보 확인 필요',address:'이 도서는 ISBN 정보가 없어 자동 조회가 어렵습니다',phone:'📞 각 도서관에 직접 문의하여 소장 여부를 확인하세요',hours:'🌐 또는 도서관 온라인 홈페이지에서 검색해보세요',available:false,reservable:false,callNumber:`${book.title} 검색`}]};}else{// 실제 소장 정보 조회\nconst realAvailability=await getRealLibraryAvailability(book.isbn,searchRegion);// 지역 도서관 정보 생성 (실제 도서관 정보 유지)\nconst regionLibraries=generateLibrariesForRegion(searchRegion);// 실제 API 데이터와 지역 도서관 정보를 결합\nconst combinedLibraries=regionLibraries.map(regionLib=>{const apiData=realAvailability.find(api=>api.libraryName.includes(regionLib.name)||regionLib.name.includes(api.libraryName));if(apiData){return{...regionLib,available:apiData.available,reservable:apiData.reservable||false};}return regionLib;});// API에서 찾은 추가 도서관들 (지역 목록에 없는 경우)\nconst additionalLibraries=realAvailability.filter(apiData=>!regionLibraries.some(regionLib=>apiData.libraryName.includes(regionLib.name)||regionLib.name.includes(apiData.libraryName))).map(apiData=>({id:apiData.libraryId||`api_${Date.now()}`,name:apiData.libraryName,address:'주소 정보 없음',phone:'전화번호 정보 없음',hours:'운영시간 정보 없음',available:apiData.available,reservable:apiData.reservable||false,callNumber:generateCallNumber(book.title,book.author)}));const allLibraries=[...combinedLibraries,...additionalLibraries];// 소장 정보가 없는 경우 사용자에게 알림\nif(realAvailability.length===0){console.warn(`⚠️ \"${book.title}\" 도서의 소장 정보를 찾을 수 없습니다. 직접 도서관에 문의해 주세요.`);// 기본 도서관 정보만 표시 (소장 여부 불확실)\nreturn{...book,libraries:regionLibraries.map(lib=>({...lib,available:false,// 확인되지 않음\nreservable:false}))};}console.log(`📚 \"${book.title}\" 실제 소장 정보:`,realAvailability);return{...book,libraries:allLibraries};}}));console.log('최종 검색 결과:',booksWithLibraries);setSearchResults(booksWithLibraries);setApiError(null);return;}// API 결과가 없으면 인기도서에서 검색\nconsole.log('🔄 인기도서에서 검색 중...');const popularBooks=await fetchPopularBooks();console.log('인기도서 목록:',popularBooks);const matchingPopularBooks=popularBooks.filter(book=>book.title.toLowerCase().includes(query.toLowerCase())||book.author.toLowerCase().includes(query.toLowerCase()));console.log('매칭된 인기도서:',matchingPopularBooks);if(matchingPopularBooks.length>0){console.log('✅ 인기도서에서 발견:',matchingPopularBooks);// 인기도서에 대해서도 실제 소장 정보 조회\nconst booksWithLibraries=await Promise.all(matchingPopularBooks.map(async book=>{// ISBN이 있는 경우만 실제 소장 정보 조회\nlet libraries;if(!book.isbn||book.isbn.trim()===''){// ISBN이 없으면 소장 정보 조회 불가 안내\nconsole.log(`📚 ${book.title}: ISBN 없음 - 소장 정보 조회 불가`);libraries=[{id:'no_isbn',name:'📋 실제 소장 정보 확인 필요',address:'이 도서는 ISBN 정보가 없어 자동 조회가 어렵습니다',phone:'📞 각 도서관에 직접 문의하여 소장 여부를 확인하세요',hours:'🌐 또는 도서관 온라인 홈페이지에서 검색해보세요',available:false,reservable:false,callNumber:`${book.title} 검색`}];}else{// 실제 소장 정보 조회\nconst realAvailability=await getRealLibraryAvailability(book.isbn,searchRegion);// 지역 도서관 정보 생성 (실제 도서관 정보 유지)\nconst baseLibraries=generateLibrariesForRegion(searchRegion);// 실제 API 데이터와 결합\nlibraries=baseLibraries.map(lib=>{const realLib=realAvailability.find(real=>real.libraryName.includes(lib.name)||lib.name.includes(real.libraryName));if(realLib){return{...lib,available:realLib.available,reservable:realLib.reservable};}// API 데이터가 없으면 기본값 사용\nreturn lib;});console.log(`📚 ${book.title} 실제 소장 정보:`,realAvailability);}return{id:book.id,title:book.title,author:book.author,publisher:book.publisher,isbn:book.isbn,category:book.category,publishYear:book.publishYear,libraries:libraries};}));console.log('최종 검색 결과:',booksWithLibraries);setSearchResults(booksWithLibraries);setApiError(null);// 에러 메시지 제거\n}else{console.log('⚠️ 검색 결과 없음');setSearchResults([]);setApiError('검색하신 도서를 찾을 수 없습니다. 다른 검색어를 시도해보세요.');}}catch(error){console.error('❌ 검색 오류:',error);setApiError('❌ API 호출에 실패했습니다. 네트워크 연결을 확인해주세요.');// 오류 발생 시 인기도서에서 검색 시도\ntry{console.log('🔄 오류 발생, 인기도서에서 검색 시도...');const popularBooks=await fetchPopularBooks();const matchingPopularBooks=popularBooks.filter(book=>book.title.toLowerCase().includes(query.toLowerCase())||book.author.toLowerCase().includes(query.toLowerCase()));if(matchingPopularBooks.length>0){const libraries=generateLibrariesForRegion(searchRegion);const booksWithLibraries=matchingPopularBooks.map(book=>({id:book.id,title:book.title,author:book.author,publisher:book.publisher,isbn:book.isbn,category:book.category,publishYear:book.publishYear,libraries:libraries}));setSearchResults(booksWithLibraries);setApiError('⚠️ API 연결 문제로 인기도서에서 검색결과를 표시합니다.');}else{setSearchResults([]);}}catch(fallbackError){console.error('❌ 인기도서 검색도 실패:',fallbackError);setSearchResults([]);}}finally{setIsLoading(false);console.log('🔍 ===== 도서 검색 완료 =====');}},[selectedRegion,generateLibrariesForRegion]);// 외부에서 검색어가 전달된 경우 처리\nuseEffect(()=>{if(externalSearchQuery&&externalSearchQuery.trim()){setSearchTerm(externalSearchQuery);performSearch(externalSearchQuery);if(onExternalSearchComplete){onExternalSearchComplete();}}},[externalSearchQuery,onExternalSearchComplete,performSearch]);// 컴포넌트 마운트 시 API 테스트\nuseEffect(()=>{console.log('🚀 BookSearchSection 컴포넌트 로드됨');testLibraryAPI();},[testLibraryAPI]);const handleSearch=e=>{e.preventDefault();if(searchTerm.trim()){performSearch(searchTerm.trim());}};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsxs(SearchForm,{onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(SearchInput,{type:\"text\",placeholder:\"\\uCC3E\\uC73C\\uC2DC\\uB294 \\uB3C4\\uC11C\\uBA85\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694 (\\uC608: \\uBBF8\\uC6C0\\uBC1B\\uC744 \\uC6A9\\uAE30, \\uB2EC\\uACFC 6\\uD39C\\uC2A4)\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(SearchButton,{type:\"submit\",disabled:isLoading,children:isLoading?'검색 중...':'🔍 검색'})]}),/*#__PURE__*/_jsx(RegionSelectorContainer,{children:/*#__PURE__*/_jsx(RegionSelector,{selectedRegion:selectedRegion,onRegionUpdate:region=>{console.log('🗺️ RegionSelector에서 지역 변경:',region);setSelectedRegion(region);// 상태 초기화\nsetSearchResults([]);setApiError(null);setHasSearched(false);setIsLoading(false);// 기존 도서명이 있으면 자동으로 재검색\nif(searchTerm.trim()){console.log('📚 기존 도서명이 있어서 자동 재검색:',searchTerm);performSearch(searchTerm.trim());}},onLibrariesUpdate:()=>{}})}),apiError&&/*#__PURE__*/_jsxs(ApiStatus,{isError:true,children:[\"\\u26A0\\uFE0F \",apiError]}),isLoading&&/*#__PURE__*/_jsxs(LoadingDiv,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px'},children:[\"\\\"\",searchTerm,\"\\\" \\uAC80\\uC0C9 \\uC911...\"]})]}),!isLoading&&hasSearched&&searchResults.length===0&&/*#__PURE__*/_jsxs(EmptyState,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"emoji\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[\"\\\"\",searchTerm,\"\\\"\\uC5D0 \\uB300\\uD55C \\uAC80\\uC0C9 \\uACB0\\uACFC\\uAC00 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"subtitle\",children:[\"\\u2022 \\uAC80\\uC0C9\\uB41C \\uB3C4\\uC11C\\uAC00 \\uC5C6\\uAC70\\uB098 \\uD574\\uB2F9 \\uC9C0\\uC5ED\\uC5D0 \\uC18C\\uC7A5\\uC911\\uC778 \\uB3C4\\uC11C\\uAD00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\uB2E4\\uB978 \\uD0A4\\uC6CC\\uB4DC\\uB85C \\uB2E4\\uC2DC \\uAC80\\uC0C9\\uD574\\uBCF4\\uC138\\uC694\",/*#__PURE__*/_jsx(\"br\",{}),\"\\u2022 \\uC608: \\\"\\uD574\\uB9AC\\uD3EC\\uD130\\\", \\\"\\uBB34\\uB77C\\uCE74\\uBBF8 \\uD558\\uB8E8\\uD0A4\\\", \\\"\\uC790\\uAE30\\uACC4\\uBC1C\\\" \\uB4F1\"]})]}),!isLoading&&searchResults.length>0&&/*#__PURE__*/_jsxs(SearchResults,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginBottom:'20px',color:'#4CAF50',fontWeight:'bold',fontSize:'16px'},children:[\"\\uD83D\\uDCDA \\\"\",searchTerm,\"\\\" \\uAC80\\uC0C9 \\uACB0\\uACFC \",searchResults.length,\"\\uAD8C (\",selectedRegion&&selectedRegion.trim()!==''?selectedRegion:'경기도',\" \\uC9C0\\uC5ED)\"]}),searchResults.map((book,index)=>/*#__PURE__*/_jsxs(BookCard,{children:[/*#__PURE__*/_jsx(BookTitle,{children:book.title}),/*#__PURE__*/_jsxs(BookInfo,{children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uC800\\uC790: \",book.author]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCD9C\\uD310\\uC0AC: \",book.publisher]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCE74\\uD14C\\uACE0\\uB9AC: \",book.category]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\uCD9C\\uAC04\\uB144\\uB3C4: \",book.publishYear,\"\\uB144\"]}),book.isbn&&/*#__PURE__*/_jsxs(\"span\",{children:[\"ISBN: \",book.isbn]})]}),/*#__PURE__*/_jsxs(LibraryList,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'600',marginBottom:'10px',color:'#2c3e50',fontSize:'15px'},children:[\"\\uD83D\\uDCCD \",selectedRegion,\" \\uB3C4\\uC11C\\uAD00 \\uC18C\\uC7A5 \\uD604\\uD669\"]}),book.libraries.map(library=>/*#__PURE__*/_jsxs(LibraryItem,{children:[/*#__PURE__*/_jsxs(LibraryName,{children:[/*#__PURE__*/_jsx(AvailabilityBadge,{available:library.available,children:library.available?'✅ 소장중':'❌ 미소장/대출중'}),' ',library.name]}),/*#__PURE__*/_jsxs(LibraryDetails,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCD \",library.address]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCDE \",library.phone]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDD50 \",library.hours]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCCB \\uC18C\\uC7A5\\uC5EC\\uBD80: \",library.available?'소장중':'미소장']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83D\\uDCDD \\uC608\\uC57D\\uAC00\\uB2A5: \",library.reservable?'가능':'불가능']}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\uD83C\\uDFF7\\uFE0F \\uCCAD\\uAD6C\\uAE30\\uD638: \",library.callNumber]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'12px',color:'#666',marginTop:'5px'},children:\"\\uD83D\\uDCA1 \\uCCAD\\uAD6C\\uAE30\\uD638\\uB85C \\uB3C4\\uC11C\\uAD00\\uC5D0\\uC11C \\uCC45\\uC744 \\uCC3E\\uC73C\\uC2E4 \\uC218 \\uC788\\uC2B5\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'11px',color:'#999',marginTop:'3px',fontStyle:'italic'},children:\"\\uD83D\\uDCCB \\uC2E4\\uC81C \\uC18C\\uC7A5 \\uD604\\uD669 \\uBC0F \\uC608\\uC57D \\uC815\\uBCF4\\uB294 \\uB3C4\\uC11C\\uAD00\\uC815\\uBCF4\\uB098\\uB8E8 API \\uAE30\\uBC18\\uC785\\uB2C8\\uB2E4\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'10px',color:'#666',marginTop:'2px'},children:\"\\uD83D\\uDCA1 \\uC815\\uD655\\uD55C \\uAD8C\\uC218 \\uC815\\uBCF4\\uB294 \\uD574\\uB2F9 \\uB3C4\\uC11C\\uAD00\\uC5D0 \\uC9C1\\uC811 \\uBB38\\uC758\\uD558\\uC138\\uC694\"})]})]},library.id))]})]},book.id||index))]})]});};export default BookSearchSection;","map":{"version":3,"names":["React","useState","useEffect","useCallback","styled","RegionSelector","searchBooksAPI","fetchPopularBooks","LibraryAPIService","jsx","_jsx","jsxs","_jsxs","Container","div","SearchForm","form","SearchInput","input","SearchButton","button","RegionSelectorContainer","SearchResults","BookCard","BookTitle","h3","BookInfo","LibraryList","LibraryItem","LibraryName","LibraryDetails","AvailabilityBadge","span","props","available","LoadingDiv","EmptyState","ApiStatus","isError","BookSearchSection","_ref","externalSearchQuery","onExternalSearchComplete","selectedRegion","parentSelectedRegion","onRegionUpdate","searchTerm","setSearchTerm","searchResults","setSearchResults","isLoading","setIsLoading","hasSearched","setHasSearched","setSelectedRegion","apiError","setApiError","libraryAPIService","baseURL","apiKey","process","env","REACT_APP_LIBRARY_API_KEY","getRealLibraryAvailability","isbn","region","arguments","length","undefined","trim","console","warn","log","availability","getBookAvailability","forEach","lib","index","libraryName","reservable","libraryId","error","testLibraryAPI","testISBN","testRegion","generateCallNumber","title","author","titleCode","slice","toUpperCase","authorCode","randomNum","Math","floor","random","toString","padStart","generateLibrariesForRegion","regionLibraries","id","name","address","phone","hours","libraries","regionLower","toLowerCase","includes","map","parseInt","seed","sections","categoryToKDC","sectionName","kdcMain","kdcSub","String","kdcDetail","authorInitials","authorNumber","titleInitials","callNumber","performSearch","query","searchRegion","apiResults","booksWithLibraries","Promise","all","book","realAvailability","combinedLibraries","regionLib","apiData","find","api","additionalLibraries","filter","some","Date","now","allLibraries","popularBooks","matchingPopularBooks","baseLibraries","realLib","real","publisher","category","publishYear","fallbackError","handleSearch","e","preventDefault","children","onSubmit","type","placeholder","value","onChange","target","disabled","onLibrariesUpdate","className","style","marginTop","textAlign","marginBottom","color","fontWeight","fontSize","library","fontStyle"],"sources":["C:/Users/qoo/Desktop/zziyoonii/senior/src/components/BookSearchSection.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport styled from 'styled-components';\nimport RegionSelector from './RegionSelector';\nimport { searchBooksAPI, fetchPopularBooks, PopularBookData, LibraryAPIService, LibraryAPIConfig } from '../services/LibraryAPI';\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n  \n  @media (max-width: 768px) {\n    padding: 15px;\n  }\n`;\n\nconst SearchForm = styled.form`\n  display: flex;\n  gap: 15px;\n  margin-bottom: 25px;\n  align-items: center;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 12px;\n  }\n`;\n\nconst SearchInput = styled.input`\n  flex: 1;\n  padding: 15px 20px;\n  border: 2px solid #e8e8e8;\n  border-radius: 12px;\n  font-size: 16px;\n  background: #ffffff;\n  transition: all 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #4CAF50;\n    box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);\n  }\n  \n  &::placeholder {\n    color: #999;\n  }\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    padding: 12px 16px;\n    font-size: 14px;\n  }\n`;\n\nconst SearchButton = styled.button`\n  padding: 15px 30px;\n  background: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  white-space: nowrap;\n  \n  &:hover {\n    background: #388e3c;\n    transform: translateY(-2px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n  }\n  \n  &:disabled {\n    background: #ccc;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n  }\n  \n  @media (max-width: 768px) {\n    width: 100%;\n    padding: 12px 24px;\n    font-size: 14px;\n  }\n`;\n\nconst RegionSelectorContainer = styled.div`\n  margin-bottom: 20px;\n`;\n\nconst SearchResults = styled.div`\n  margin-top: 30px;\n`;\n\nconst BookCard = styled.div`\n  background: white;\n  border: 2px solid #e8e8e8;\n  border-radius: 12px;\n  padding: 20px;\n  margin-bottom: 20px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  }\n`;\n\nconst BookTitle = styled.h3`\n  margin: 0 0 8px 0;\n  color: #2c3e50;\n  font-size: 18px;\n  font-weight: 600;\n  line-height: 1.4;\n`;\n\nconst BookInfo = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  gap: 15px;\n  margin-bottom: 15px;\n  \n  @media (max-width: 768px) {\n    flex-direction: column;\n    gap: 8px;\n  }\n  \n  span {\n    font-size: 14px;\n    color: #7f8c8d;\n    \n    &:before {\n      content: \"• \";\n      color: #4CAF50;\n      font-weight: bold;\n    }\n    \n    &:first-child:before {\n      content: \"\";\n    }\n  }\n`;\n\nconst LibraryList = styled.div`\n  margin-top: 15px;\n  border-top: 1px solid #eee;\n  padding-top: 15px;\n`;\n\nconst LibraryItem = styled.div`\n  background: #f8f9fa;\n  border: 1px solid #e9ecef;\n  border-radius: 8px;\n  padding: 15px;\n  margin-bottom: 10px;\n  \n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst LibraryName = styled.div`\n  font-weight: 600;\n  color: #2c3e50;\n  margin-bottom: 8px;\n  font-size: 16px;\n`;\n\nconst LibraryDetails = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 10px;\n  font-size: 14px;\n  color: #555;\n  \n  @media (max-width: 768px) {\n    grid-template-columns: 1fr;\n  }\n`;\n\nconst AvailabilityBadge = styled.span<{ available: boolean }>`\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 600;\n  background: ${props => props.available ? '#d4edda' : '#f8d7da'};\n  color: ${props => props.available ? '#155724' : '#721c24'};\n  border: 1px solid ${props => props.available ? '#c3e6cb' : '#f5c6cb'};\n`;\n\nconst LoadingDiv = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  padding: 40px;\n  color: #7f8c8d;\n  font-size: 16px;\n\n  .spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid #f3f3f3;\n    border-top: 4px solid #4CAF50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;\n\nconst EmptyState = styled.div`\n  text-align: center;\n  padding: 40px;\n  color: #7f8c8d;\n  \n  .emoji {\n    font-size: 48px;\n    margin-bottom: 16px;\n  }\n  \n  .title {\n    font-size: 18px;\n    font-weight: 600;\n    margin-bottom: 8px;\n    color: #2c3e50;\n  }\n  \n  .subtitle {\n    font-size: 14px;\n    line-height: 1.5;\n  }\n`;\n\nconst ApiStatus = styled.div<{ isError?: boolean }>`\n  font-size: 12px;\n  color: ${props => props.isError ? '#dc3545' : '#6c757d'};\n  text-align: center;\n  margin-bottom: 10px;\n  padding: 5px 10px;\n  background: ${props => props.isError ? '#f8d7da' : '#f8f9fa'};\n  border-radius: 4px;\n  border: 1px solid ${props => props.isError ? '#f5c6cb' : '#e9ecef'};\n`;\n\ninterface Book {\n  id: string;\n  title: string;\n  author: string;\n  publisher: string;\n  isbn: string;\n  category: string;\n  publishYear: string;\n  description?: string;\n}\n\ninterface Library {\n  id: string;\n  name: string;\n  address: string;\n  phone: string;\n  hours: string;\n  available: boolean;\n  reservable?: boolean; // 예약 가능 여부 추가\n  callNumber: string; // 청구기호 추가\n}\n\ninterface BookWithLibraries extends Book {\n  libraries: Library[];\n}\n\ninterface BookSearchSectionProps {\n  externalSearchQuery?: string;\n  onExternalSearchComplete?: () => void;\n  selectedRegion?: string;\n  onRegionUpdate?: (region: string) => void;\n}\n\nconst BookSearchSection: React.FC<BookSearchSectionProps> = ({ \n  externalSearchQuery, \n  onExternalSearchComplete,\n  selectedRegion: parentSelectedRegion,\n  onRegionUpdate \n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState<BookWithLibraries[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasSearched, setHasSearched] = useState(false);\n  const [selectedRegion, setSelectedRegion] = useState(parentSelectedRegion || '');\n  const [apiError, setApiError] = useState<string | null>(null);\n  \n  // LibraryAPIService 인스턴스 생성\n  const libraryAPIService = new LibraryAPIService({\n    baseURL: 'http://data4library.kr/api',\n    apiKey: process.env.REACT_APP_LIBRARY_API_KEY || '8b62aa70e514468596e9324d064d582d'\n  });\n\n  // 실제 소장 정보를 가져오는 함수\n  const getRealLibraryAvailability = useCallback(async (isbn: string, region: string = '경기도') => {\n    try {\n      // ISBN이 없거나 비어있으면 API 호출하지 않음\n      if (!isbn || isbn.trim() === '') {\n        console.warn(`⚠️ ISBN이 없어서 소장 정보를 조회할 수 없습니다`);\n        return [];\n      }\n      \n      console.log(`🔍 API 호출 시작 - ISBN: ${isbn}, 지역: ${region}`);\n      const availability = await libraryAPIService.getBookAvailability(isbn, region);\n      console.log(`📊 API 응답 데이터:`, availability);\n      console.log(`📈 응답 개수: ${availability.length}개 도서관`);\n      \n      if (availability.length > 0) {\n        availability.forEach((lib, index) => {\n          console.log(`📚 도서관 ${index + 1}: ${lib.libraryName}`);\n          console.log(`   - 소장중: ${lib.available}`);\n          console.log(`   - 예약가능: ${lib.reservable}`);\n          console.log(`   - 도서관코드: ${lib.libraryId}`);\n        });\n      } else {\n        console.warn(`⚠️ ISBN ${isbn}에 대한 소장 정보가 없습니다`);\n      }\n      \n      return availability;\n    } catch (error) {\n      console.error('💥 소장 정보 조회 실패:', error);\n      return [];\n    }\n  }, []);\n\n  // API 테스트 함수\n  const testLibraryAPI = useCallback(async () => {\n    try {\n      console.log('🧪 도서관정보나루 API 테스트 시작');\n      \n      // 잘 알려진 도서의 ISBN으로 테스트 (해리포터와 마법사의 돌)\n      const testISBN = '9788983925244'; \n      const testRegion = '경기도';\n      \n      console.log(`🔍 테스트 ISBN: ${testISBN}, 지역: ${testRegion}`);\n      \n      const availability = await libraryAPIService.getBookAvailability(testISBN, testRegion);\n      \n      if (availability && availability.length > 0) {\n        console.log('✅ API 정상 작동 - 소장 도서관 수:', availability.length);\n        availability.forEach((lib, index) => {\n          console.log(`📚 도서관 ${index + 1}: ${lib.libraryName} (${lib.available ? '소장중' : '미소장'})`);\n        });\n        return true;\n      } else {\n        console.warn('⚠️ API 응답에 소장 정보가 없음');\n        return false;\n      }\n      \n    } catch (error) {\n      console.error('💥 API 테스트 실패:', error);\n      return false;\n    }\n  }, []);\n\n  // 청구기호 생성 함수\n  const generateCallNumber = (title: string, author: string): string => {\n    // 간단한 청구기호 생성 (실제 도서관에서는 더 복잡한 분류 체계를 사용)\n    const titleCode = title.slice(0, 2).toUpperCase();\n    const authorCode = author.slice(0, 2).toUpperCase();\n    const randomNum = Math.floor(Math.random() * 1000).toString().padStart(3, '0');\n    return `${titleCode}${authorCode}${randomNum}`;\n  };\n\n  // 실제 도서관 정보 + API 소장 현황 결합\n  \n  // 실제 도서관 정보 + API 소장 현황 결합\n  const generateLibrariesForRegion = useCallback((region: string): Library[] => {\n    interface BasicLibraryInfo {\n      id: string;\n      name: string;\n      address: string;\n      phone: string;\n      hours: string;\n    }\n    \n    const regionLibraries: { [key: string]: BasicLibraryInfo[] } = {\n      '경기도': [\n        // 수원시 도서관\n        { id: '1', name: '경기도립중앙도서관', address: '수원시 영통구 월드컵로 235', phone: '031-249-4800', hours: '09:00-18:00' },\n        { id: '2', name: '수원시립중앙도서관', address: '수원시 영통구 광교로 183', phone: '031-228-4300', hours: '09:00-22:00' },\n        { id: '3', name: '영통구립도서관', address: '수원시 영통구 영통동 999-1', phone: '031-228-4350', hours: '09:00-20:00' },\n        { id: '4', name: '광교도서관', address: '수원시 영통구 광교동 1271', phone: '031-228-4370', hours: '09:00-20:00' },\n        { id: '5', name: '팔달구립도서관', address: '수원시 팔달구 팔달로 123', phone: '031-267-3456', hours: '09:00-18:00' },\n        { id: '6', name: '장안구립도서관', address: '수원시 장안구 장안로 456', phone: '031-267-7890', hours: '09:00-18:00' },\n        { id: '7', name: '권선구립도서관', address: '수원시 권선구 권선로 789', phone: '031-267-2345', hours: '09:00-18:00' },\n        // 성남시 도서관\n        { id: '8', name: '성남시립중앙도서관', address: '성남시 분당구 양현로 346', phone: '031-729-4600', hours: '09:00-18:00' },\n        { id: '9', name: '분당도서관', address: '성남시 분당구 불정로 90', phone: '031-710-3000', hours: '09:00-20:00' },\n        { id: '10', name: '판교도서관', address: '성남시 분당구 판교역로 146', phone: '031-729-4700', hours: '09:00-20:00' },\n        { id: '11', name: '서현도서관', address: '성남시 분당구 서현동 263', phone: '031-729-4800', hours: '09:00-18:00' },\n        { id: '12', name: '중원구립도서관', address: '성남시 중원구 성남대로 997', phone: '031-729-4900', hours: '09:00-18:00' },\n        { id: '13', name: '수정구립도서관', address: '성남시 수정구 수정로 157', phone: '031-729-5000', hours: '09:00-18:00' },\n        { id: '14', name: '태평동 작은도서관', address: '성남시 수정구 태평동 6100', phone: '031-729-5100', hours: '10:00-18:00' },\n        // 고양시 도서관\n        { id: '15', name: '고양시립중앙도서관', address: '고양시 덕양구 고양대로 1955', phone: '031-8075-9300', hours: '09:00-18:00' },\n        { id: '16', name: '일산도서관', address: '고양시 일산동구 중앙로 1275', phone: '031-8075-9400', hours: '09:00-20:00' },\n        { id: '17', name: '식사도서관', address: '고양시 일산동구 식사동 142', phone: '031-8075-9500', hours: '09:00-20:00' },\n        { id: '18', name: '주엽도서관', address: '고양시 일산서구 주엽동 115', phone: '031-8075-9600', hours: '09:00-20:00' },\n        { id: '19', name: '탄현도서관', address: '고양시 일산서구 탄현동 1616', phone: '031-8075-9700', hours: '09:00-18:00' },\n        { id: '20', name: '덕양구립도서관', address: '고양시 덕양구 화정동 968', phone: '031-8075-9800', hours: '09:00-18:00' },\n        { id: '21', name: '행신도서관', address: '고양시 덕양구 행신동 615', phone: '031-8075-9900', hours: '10:00-18:00' },\n        // 용인시 도서관\n        { id: '22', name: '용인시립중앙도서관', address: '용인시 처인구 중부대로 1199', phone: '031-324-4800', hours: '09:00-18:00' },\n        { id: '23', name: '기흥도서관', address: '용인시 기흥구 중부대로 1174', phone: '031-324-4900', hours: '09:00-20:00' },\n        { id: '24', name: '서농도서관', address: '용인시 기흥구 서천동 588', phone: '031-324-5000', hours: '09:00-20:00' },\n        { id: '25', name: '수지도서관', address: '용인시 수지구 수지로 63', phone: '031-324-5100', hours: '09:00-20:00' },\n        { id: '26', name: '풍덕천도서관', address: '용인시 수지구 풍덕천동 1286', phone: '031-324-5200', hours: '09:00-18:00' },\n        { id: '27', name: '상현도서관', address: '용인시 수지구 상현동 542', phone: '031-324-5300', hours: '09:00-20:00' },\n        { id: '28', name: '죽전도서관', address: '용인시 수지구 죽전동 1258', phone: '031-324-5400', hours: '09:00-18:00' },\n        { id: '29', name: '보정도서관', address: '용인시 수지구 보정동 1157', phone: '031-324-5500', hours: '09:00-18:00' },\n        { id: '30', name: '마북도서관', address: '용인시 기흥구 마북동 530', phone: '031-324-5600', hours: '09:00-18:00' },\n        { id: '31', name: '동백도서관', address: '용인시 기흥구 동백동 631', phone: '031-324-5700', hours: '09:00-20:00' },\n        { id: '32', name: '구성도서관', address: '용인시 수지구 구성동 194', phone: '031-324-5800', hours: '09:00-18:00' },\n        { id: '33', name: '처인구립도서관', address: '용인시 처인구 삼가동 234', phone: '031-324-5900', hours: '09:00-18:00' },\n      ],\n      '수원시': [\n        // 중앙도서관\n        { id: '1', name: '경기도립중앙도서관', address: '수원시 영통구 월드컵로 235', phone: '031-249-4800', hours: '09:00-18:00' },\n        { id: '2', name: '수원시립중앙도서관', address: '수원시 영통구 광교로 183', phone: '031-228-4300', hours: '09:00-22:00' },\n        // 구/동 단위 도서관\n        { id: '3', name: '영통구립도서관', address: '수원시 영통구 영통동 999-1', phone: '031-228-4350', hours: '09:00-20:00' },\n        { id: '4', name: '광교도서관', address: '수원시 영통구 광교동 1271', phone: '031-228-4370', hours: '09:00-20:00' },\n        { id: '5', name: '팔달구립도서관', address: '수원시 팔달구 팔달로 123', phone: '031-267-3456', hours: '09:00-18:00' },\n        { id: '6', name: '장안구립도서관', address: '수원시 장안구 장안로 456', phone: '031-267-7890', hours: '09:00-18:00' },\n        { id: '7', name: '권선구립도서관', address: '수원시 권선구 권선로 789', phone: '031-267-2345', hours: '09:00-18:00' },\n      ],\n      '성남시': [\n        // 중앙도서관\n        { id: '8', name: '성남시립중앙도서관', address: '성남시 분당구 양현로 346', phone: '031-729-4600', hours: '09:00-18:00' },\n        { id: '9', name: '분당도서관', address: '성남시 분당구 불정로 90', phone: '031-710-3000', hours: '09:00-20:00' },\n        // 구/동 단위 도서관\n        { id: '10', name: '판교도서관', address: '성남시 분당구 판교역로 146', phone: '031-729-4700', hours: '09:00-20:00' },\n        { id: '11', name: '서현도서관', address: '성남시 분당구 서현동 263', phone: '031-729-4800', hours: '09:00-18:00' },\n        { id: '12', name: '중원구립도서관', address: '성남시 중원구 성남대로 997', phone: '031-729-4900', hours: '09:00-18:00' },\n        { id: '13', name: '수정구립도서관', address: '성남시 수정구 수정로 157', phone: '031-729-5000', hours: '09:00-18:00' },\n        { id: '14', name: '태평동 작은도서관', address: '성남시 수정구 태평동 6100', phone: '031-729-5100', hours: '10:00-18:00' },\n      ],\n      '고양시': [\n        // 중앙도서관\n        { id: '15', name: '고양시립중앙도서관', address: '고양시 덕양구 고양대로 1955', phone: '031-8075-9300', hours: '09:00-18:00' },\n        { id: '16', name: '일산도서관', address: '고양시 일산동구 중앙로 1275', phone: '031-8075-9400', hours: '09:00-20:00' },\n        // 구/동 단위 도서관\n        { id: '17', name: '식사도서관', address: '고양시 일산동구 식사동 142', phone: '031-8075-9500', hours: '09:00-20:00' },\n        { id: '18', name: '주엽도서관', address: '고양시 일산서구 주엽동 115', phone: '031-8075-9600', hours: '09:00-20:00' },\n        { id: '19', name: '탄현도서관', address: '고양시 일산서구 탄현동 1616', phone: '031-8075-9700', hours: '09:00-18:00' },\n        { id: '20', name: '덕양구립도서관', address: '고양시 덕양구 화정동 968', phone: '031-8075-9800', hours: '09:00-18:00' },\n        { id: '21', name: '행신도서관', address: '고양시 덕양구 행신동 615', phone: '031-8075-9900', hours: '10:00-18:00' },\n      ],\n      '용인시': [\n        // 중앙도서관\n        { id: '22', name: '용인시립중앙도서관', address: '용인시 처인구 중부대로 1199', phone: '031-324-4800', hours: '09:00-18:00' },\n        { id: '23', name: '기흥도서관', address: '용인시 기흥구 중부대로 1174', phone: '031-324-4900', hours: '09:00-20:00' },\n        // 구/동 단위 도서관 (사용자 요청 - 서농도서관 포함)\n        { id: '24', name: '서농도서관', address: '용인시 기흥구 서천동 588', phone: '031-324-5000', hours: '09:00-20:00' },\n        { id: '25', name: '수지도서관', address: '용인시 수지구 수지로 63', phone: '031-324-5100', hours: '09:00-20:00' },\n        { id: '26', name: '풍덕천도서관', address: '용인시 수지구 풍덕천동 1286', phone: '031-324-5200', hours: '09:00-18:00' },\n        { id: '27', name: '상현도서관', address: '용인시 수지구 상현동 542', phone: '031-324-5300', hours: '09:00-20:00' },\n        { id: '28', name: '죽전도서관', address: '용인시 수지구 죽전동 1258', phone: '031-324-5400', hours: '09:00-18:00' },\n        { id: '29', name: '보정도서관', address: '용인시 수지구 보정동 1157', phone: '031-324-5500', hours: '09:00-18:00' },\n        { id: '30', name: '마북도서관', address: '용인시 기흥구 마북동 530', phone: '031-324-5600', hours: '09:00-18:00' },\n        { id: '31', name: '동백도서관', address: '용인시 기흥구 동백동 631', phone: '031-324-5700', hours: '09:00-20:00' },\n        { id: '32', name: '구성도서관', address: '용인시 수지구 구성동 194', phone: '031-324-5800', hours: '09:00-18:00' },\n        { id: '33', name: '처인구립도서관', address: '용인시 처인구 삼가동 234', phone: '031-324-5900', hours: '09:00-18:00' },\n      ],\n      // 용인시 구별 세분화\n      '기흥구': [\n        { id: '23', name: '기흥도서관', address: '용인시 기흥구 중부대로 1174', phone: '031-324-4900', hours: '09:00-20:00' },\n        { id: '24', name: '서농도서관', address: '용인시 기흥구 서천동 588', phone: '031-324-5000', hours: '09:00-20:00' },\n        { id: '30', name: '마북도서관', address: '용인시 기흥구 마북동 530', phone: '031-324-5600', hours: '09:00-18:00' },\n        { id: '31', name: '동백도서관', address: '용인시 기흥구 동백동 631', phone: '031-324-5700', hours: '09:00-20:00' },\n      ],\n      '수지구': [\n        { id: '25', name: '수지도서관', address: '용인시 수지구 수지로 63', phone: '031-324-5100', hours: '09:00-20:00' },\n        { id: '26', name: '풍덕천도서관', address: '용인시 수지구 풍덕천동 1286', phone: '031-324-5200', hours: '09:00-18:00' },\n        { id: '27', name: '상현도서관', address: '용인시 수지구 상현동 542', phone: '031-324-5300', hours: '09:00-20:00' },\n        { id: '28', name: '죽전도서관', address: '용인시 수지구 죽전동 1258', phone: '031-324-5400', hours: '09:00-18:00' },\n        { id: '29', name: '보정도서관', address: '용인시 수지구 보정동 1157', phone: '031-324-5500', hours: '09:00-18:00' },\n        { id: '32', name: '구성도서관', address: '용인시 수지구 구성동 194', phone: '031-324-5800', hours: '09:00-18:00' },\n      ],\n      '처인구': [\n        { id: '22', name: '용인시립중앙도서관', address: '용인시 처인구 중부대로 1199', phone: '031-324-4800', hours: '09:00-18:00' },\n        { id: '33', name: '처인구립도서관', address: '용인시 처인구 삼가동 234', phone: '031-324-5900', hours: '09:00-18:00' },\n      ]\n    };\n\n    // 지역명에 따른 도서관 선택\n    let libraries = regionLibraries[region];\n    \n    // 정확한 지역명이 없으면 포함된 단어로 검색\n    if (!libraries) {\n      const regionLower = region.toLowerCase();\n      if (regionLower.includes('경기도') || regionLower.includes('경기')) {\n        libraries = regionLibraries['경기도'];\n      } else if (regionLower.includes('기흥')) {\n        libraries = regionLibraries['기흥구'];\n      } else if (regionLower.includes('수지')) {\n        libraries = regionLibraries['수지구'];\n      } else if (regionLower.includes('처인')) {\n        libraries = regionLibraries['처인구'];\n      } else if (regionLower.includes('용인')) {\n        libraries = regionLibraries['용인시'];\n      } else if (regionLower.includes('수원')) {\n        libraries = regionLibraries['수원시'];\n      } else if (regionLower.includes('성남')) {\n        libraries = regionLibraries['성남시'];\n      } else if (regionLower.includes('고양')) {\n        libraries = regionLibraries['고양시'];\n      } else {\n        // 기본값으로 경기도 전체 사용\n        libraries = regionLibraries['경기도'];\n      }\n    }\n    \n    return libraries.map((lib, index) => {\n      // 각 도서관별로 청구기호 생성을 위한 시드값\n      const libraryId = parseInt(lib.id);\n      const seed = (libraryId * 17 + index) % 100;\n      \n      // KDC(한국십진분류법) 기반 청구기호 생성\n      const sections = ['문학', '인문', '사회과학', '자연과학', '예술', '역사', '철학', '종교'];\n      \n      // 카테고리에 따른 KDC 분류 매핑\n      const categoryToKDC: { [key: string]: string } = {\n        '문학': '8',\n        '인문': '1',\n        '사회과학': '3',\n        '자연과학': '5',\n        '예술': '7',\n        '역사': '9',\n        '철학': '1',\n        '종교': '2',\n        '기술': '6',\n        '언어': '4',\n        '일반': '0'\n      };\n      \n      const sectionName = sections[seed % sections.length];\n      const kdcMain = categoryToKDC[sectionName] || '8';\n      const kdcSub = String((seed % 9) + 1).padStart(1, '0');\n      const kdcDetail = String((seed % 9) + 1).padStart(1, '0');\n      \n      // 저자명에서 첫 글자 추출 (가상의 저자명 생성)\n      const authorInitials = ['김', '이', '박', '최', '정', '강', '조', '윤', '장', '임'];\n      const authorCode = authorInitials[seed % authorInitials.length];\n      const authorNumber = String((seed % 99) + 1).padStart(2, '0');\n      \n      // 제목 첫 글자 (가상)\n      const titleInitials = ['ㄱ', 'ㄴ', 'ㄷ', 'ㄹ', 'ㅁ', 'ㅂ', 'ㅅ', 'ㅇ', 'ㅈ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'];\n      const titleCode = titleInitials[seed % titleInitials.length];\n      \n      const callNumber = `${kdcMain}${kdcSub}${kdcDetail}.${kdcSub} ${authorCode}${authorNumber}${titleCode}`;\n      \n      return {\n        ...lib,\n        available: false, // 기본값, API 데이터로 덮어씌워짐\n        reservable: false, // 기본값, API 데이터로 덮어씌워짐\n        callNumber: callNumber // 청구기호\n      };\n    });\n  }, []);\n\n  const performSearch = useCallback(async (query: string) => {\n    // 지역이 선택되지 않았으면 기본값으로 '경기도'를 사용\n    const searchRegion = selectedRegion && selectedRegion.trim() !== '' ? selectedRegion : '경기도';\n\n    console.log('🔍 ===== 도서 검색 시작 =====');\n    console.log('검색어:', query);\n    console.log('선택된 지역:', selectedRegion);\n    console.log('사용할 지역:', searchRegion);\n\n    setIsLoading(true);\n    setHasSearched(true);\n    setApiError(null);\n\n    try {\n      console.log('🔍 도서 검색:', query, '지역:', searchRegion);\n      \n      // 실제 API 검색 시도\n      const apiResults = await searchBooksAPI(query, 1, 10);\n      console.log('API 검색 결과:', apiResults);\n      \n      if (apiResults.length > 0) {\n        console.log('✅ API 검색 성공:', apiResults);\n        \n        // 각 도서에 대해 실제 소장 정보와 지역 도서관 정보 추가\n        const booksWithLibraries: BookWithLibraries[] = await Promise.all(\n          apiResults.map(async (book) => {\n            // ISBN이 있는 경우만 실제 소장 정보 조회\n            let libraries;\n            \n            if (!book.isbn || book.isbn.trim() === '') {\n              // ISBN이 없으면 소장 정보 조회 불가 안내\n              console.log(`📚 ${book.title}: ISBN 없음 - 소장 정보 조회 불가`);\n              return {\n                ...book,\n                libraries: [{\n                  id: 'no_isbn',\n                  name: '📋 실제 소장 정보 확인 필요',\n                  address: '이 도서는 ISBN 정보가 없어 자동 조회가 어렵습니다',\n                  phone: '📞 각 도서관에 직접 문의하여 소장 여부를 확인하세요',\n                  hours: '🌐 또는 도서관 온라인 홈페이지에서 검색해보세요',\n                  available: false,\n                  reservable: false,\n                  callNumber: `${book.title} 검색`\n                }]\n              };\n            } else {\n              // 실제 소장 정보 조회\n              const realAvailability = await getRealLibraryAvailability(book.isbn, searchRegion);\n              \n              // 지역 도서관 정보 생성 (실제 도서관 정보 유지)\n              const regionLibraries = generateLibrariesForRegion(searchRegion);\n              \n              // 실제 API 데이터와 지역 도서관 정보를 결합\n              const combinedLibraries = regionLibraries.map(regionLib => {\n                const apiData = realAvailability.find(api => \n                  api.libraryName.includes(regionLib.name) || \n                  regionLib.name.includes(api.libraryName)\n                );\n                \n                if (apiData) {\n                  return {\n                    ...regionLib,\n                    available: apiData.available,\n                    reservable: apiData.reservable || false\n                  };\n                }\n                \n                return regionLib;\n              });\n              \n              // API에서 찾은 추가 도서관들 (지역 목록에 없는 경우)\n              const additionalLibraries = realAvailability\n                .filter(apiData => !regionLibraries.some(regionLib => \n                  apiData.libraryName.includes(regionLib.name) || \n                  regionLib.name.includes(apiData.libraryName)\n                ))\n                .map(apiData => ({\n                  id: apiData.libraryId || `api_${Date.now()}`,\n                  name: apiData.libraryName,\n                  address: '주소 정보 없음',\n                  phone: '전화번호 정보 없음',\n                  hours: '운영시간 정보 없음',\n                  available: apiData.available,\n                  reservable: apiData.reservable || false,\n                  callNumber: generateCallNumber(book.title, book.author)\n                }));\n              \n              const allLibraries = [...combinedLibraries, ...additionalLibraries];\n              \n              // 소장 정보가 없는 경우 사용자에게 알림\n              if (realAvailability.length === 0) {\n                console.warn(`⚠️ \"${book.title}\" 도서의 소장 정보를 찾을 수 없습니다. 직접 도서관에 문의해 주세요.`);\n                // 기본 도서관 정보만 표시 (소장 여부 불확실)\n                return {\n                  ...book,\n                  libraries: regionLibraries.map(lib => ({\n                    ...lib,\n                    available: false, // 확인되지 않음\n                    reservable: false\n                  }))\n                };\n              }\n              \n              console.log(`📚 \"${book.title}\" 실제 소장 정보:`, realAvailability);\n              \n              return {\n                ...book,\n                libraries: allLibraries\n              };\n            }\n          })\n        );\n        \n        console.log('최종 검색 결과:', booksWithLibraries);\n        setSearchResults(booksWithLibraries);\n        setApiError(null);\n        return;\n      }\n      \n      // API 결과가 없으면 인기도서에서 검색\n      console.log('🔄 인기도서에서 검색 중...');\n      const popularBooks = await fetchPopularBooks();\n      console.log('인기도서 목록:', popularBooks);\n      \n      const matchingPopularBooks = popularBooks.filter((book: PopularBookData) => \n        book.title.toLowerCase().includes(query.toLowerCase()) || \n        book.author.toLowerCase().includes(query.toLowerCase())\n      );\n      \n      console.log('매칭된 인기도서:', matchingPopularBooks);\n      \n      if (matchingPopularBooks.length > 0) {\n        console.log('✅ 인기도서에서 발견:', matchingPopularBooks);\n        \n        // 인기도서에 대해서도 실제 소장 정보 조회\n        const booksWithLibraries: BookWithLibraries[] = await Promise.all(\n          matchingPopularBooks.map(async (book) => {\n                                                   // ISBN이 있는 경우만 실제 소장 정보 조회\n             let libraries;\n             \n             if (!book.isbn || book.isbn.trim() === '') {\n               // ISBN이 없으면 소장 정보 조회 불가 안내\n               console.log(`📚 ${book.title}: ISBN 없음 - 소장 정보 조회 불가`);\n               libraries = [{\n                 id: 'no_isbn',\n                 name: '📋 실제 소장 정보 확인 필요',\n                 address: '이 도서는 ISBN 정보가 없어 자동 조회가 어렵습니다',\n                 phone: '📞 각 도서관에 직접 문의하여 소장 여부를 확인하세요',\n                 hours: '🌐 또는 도서관 온라인 홈페이지에서 검색해보세요',\n                 available: false,\n                 reservable: false,\n                 callNumber: `${book.title} 검색`\n               }];\n             } else {\n               // 실제 소장 정보 조회\n               const realAvailability = await getRealLibraryAvailability(book.isbn, searchRegion);\n               \n               // 지역 도서관 정보 생성 (실제 도서관 정보 유지)\n               const baseLibraries = generateLibrariesForRegion(searchRegion);\n               \n               // 실제 API 데이터와 결합\n               libraries = baseLibraries.map(lib => {\n                 const realLib = realAvailability.find(real => \n                   real.libraryName.includes(lib.name) || \n                   lib.name.includes(real.libraryName)\n                 );\n                 \n                 if (realLib) {\n                   return {\n                     ...lib,\n                     available: realLib.available,\n                     reservable: realLib.reservable\n                   };\n                 }\n                 \n                 // API 데이터가 없으면 기본값 사용\n                 return lib;\n               });\n               \n               console.log(`📚 ${book.title} 실제 소장 정보:`, realAvailability);\n             }\n             \n             return {\n               id: book.id,\n               title: book.title,\n               author: book.author,\n               publisher: book.publisher,\n               isbn: book.isbn,\n               category: book.category,\n               publishYear: book.publishYear,\n               libraries: libraries\n             };\n          })\n        );\n        \n        console.log('최종 검색 결과:', booksWithLibraries);\n        setSearchResults(booksWithLibraries);\n        setApiError(null); // 에러 메시지 제거\n      } else {\n        console.log('⚠️ 검색 결과 없음');\n        setSearchResults([]);\n        setApiError('검색하신 도서를 찾을 수 없습니다. 다른 검색어를 시도해보세요.');\n      }\n      \n    } catch (error) {\n      console.error('❌ 검색 오류:', error);\n      setApiError('❌ API 호출에 실패했습니다. 네트워크 연결을 확인해주세요.');\n      \n      // 오류 발생 시 인기도서에서 검색 시도\n      try {\n        console.log('🔄 오류 발생, 인기도서에서 검색 시도...');\n        const popularBooks = await fetchPopularBooks();\n        const matchingPopularBooks = popularBooks.filter((book: PopularBookData) => \n          book.title.toLowerCase().includes(query.toLowerCase()) || \n          book.author.toLowerCase().includes(query.toLowerCase())\n        );\n        \n        if (matchingPopularBooks.length > 0) {\n          const libraries = generateLibrariesForRegion(searchRegion);\n          const booksWithLibraries: BookWithLibraries[] = matchingPopularBooks.map(book => ({\n            id: book.id,\n            title: book.title,\n            author: book.author,\n            publisher: book.publisher,\n            isbn: book.isbn,\n            category: book.category,\n            publishYear: book.publishYear,\n            libraries: libraries\n          }));\n          \n          setSearchResults(booksWithLibraries);\n          setApiError('⚠️ API 연결 문제로 인기도서에서 검색결과를 표시합니다.');\n        } else {\n          setSearchResults([]);\n        }\n      } catch (fallbackError) {\n        console.error('❌ 인기도서 검색도 실패:', fallbackError);\n        setSearchResults([]);\n      }\n    } finally {\n      setIsLoading(false);\n      console.log('🔍 ===== 도서 검색 완료 =====');\n    }\n  }, [selectedRegion, generateLibrariesForRegion]);\n\n\n\n  // 외부에서 검색어가 전달된 경우 처리\n  useEffect(() => {\n    if (externalSearchQuery && externalSearchQuery.trim()) {\n      setSearchTerm(externalSearchQuery);\n      performSearch(externalSearchQuery);\n      if (onExternalSearchComplete) {\n        onExternalSearchComplete();\n      }\n    }\n  }, [externalSearchQuery, onExternalSearchComplete, performSearch]);\n\n  // 컴포넌트 마운트 시 API 테스트\n  useEffect(() => {\n    console.log('🚀 BookSearchSection 컴포넌트 로드됨');\n    testLibraryAPI();\n  }, [testLibraryAPI]);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (searchTerm.trim()) {\n      performSearch(searchTerm.trim());\n    }\n  };\n\n  return (\n    <Container>\n      <SearchForm onSubmit={handleSearch}>\n        <SearchInput\n          type=\"text\"\n          placeholder=\"찾으시는 도서명을 입력해주세요 (예: 미움받을 용기, 달과 6펜스)\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        <SearchButton type=\"submit\" disabled={isLoading}>\n          {isLoading ? '검색 중...' : '🔍 검색'}\n        </SearchButton>\n      </SearchForm>\n\n      <RegionSelectorContainer>\n                <RegionSelector\n          selectedRegion={selectedRegion}\n          onRegionUpdate={(region) => {\n            console.log('🗺️ RegionSelector에서 지역 변경:', region);\n            setSelectedRegion(region);\n            // 상태 초기화\n            setSearchResults([]);\n            setApiError(null);\n            setHasSearched(false);\n            setIsLoading(false);\n            \n            // 기존 도서명이 있으면 자동으로 재검색\n            if (searchTerm.trim()) {\n              console.log('📚 기존 도서명이 있어서 자동 재검색:', searchTerm);\n              performSearch(searchTerm.trim());\n            }\n          }}\n          onLibrariesUpdate={() => {}}\n        />\n      </RegionSelectorContainer>\n\n      {apiError && (\n        <ApiStatus isError={true}>\n          ⚠️ {apiError}\n        </ApiStatus>\n      )}\n\n      {isLoading && (\n        <LoadingDiv>\n          <div className=\"spinner\"></div>\n          <div style={{ marginTop: '10px' }}>\"{searchTerm}\" 검색 중...</div>\n        </LoadingDiv>\n      )}\n\n      {!isLoading && hasSearched && searchResults.length === 0 && (\n        <EmptyState>\n          <div className=\"emoji\">🔍</div>\n          <div className=\"title\">\"{searchTerm}\"에 대한 검색 결과가 없습니다</div>\n          <div className=\"subtitle\">\n            • 검색된 도서가 없거나 해당 지역에 소장중인 도서관이 없습니다<br/>\n            • 다른 키워드로 다시 검색해보세요<br/>\n            • 예: \"해리포터\", \"무라카미 하루키\", \"자기계발\" 등\n          </div>\n        </EmptyState>\n      )}\n\n      {!isLoading && searchResults.length > 0 && (\n        <SearchResults>\n          <div style={{ \n            textAlign: 'center', \n            marginBottom: '20px',\n            color: '#4CAF50',\n            fontWeight: 'bold',\n            fontSize: '16px'\n          }}>\n            📚 \"{searchTerm}\" 검색 결과 {searchResults.length}권 ({selectedRegion && selectedRegion.trim() !== '' ? selectedRegion : '경기도'} 지역)\n          </div>\n          \n          {searchResults.map((book, index) => (\n            <BookCard key={book.id || index}>\n              <BookTitle>{book.title}</BookTitle>\n              <BookInfo>\n                <span>저자: {book.author}</span>\n                <span>출판사: {book.publisher}</span>\n                <span>카테고리: {book.category}</span>\n                <span>출간년도: {book.publishYear}년</span>\n                {book.isbn && <span>ISBN: {book.isbn}</span>}\n              </BookInfo>\n              \n              <LibraryList>\n                <div style={{ \n                  fontWeight: '600', \n                  marginBottom: '10px',\n                  color: '#2c3e50',\n                  fontSize: '15px'\n                }}>\n                  📍 {selectedRegion} 도서관 소장 현황\n                </div>\n                \n                {book.libraries.map((library) => (\n                  <LibraryItem key={library.id}>\n                    <LibraryName>\n                      <AvailabilityBadge available={library.available}>\n                        {library.available ? '✅ 소장중' : '❌ 미소장/대출중'}\n                      </AvailabilityBadge>\n                      {' '}{library.name}\n                    </LibraryName>\n                    \n                    <LibraryDetails>\n                      <div>📍 {library.address}</div>\n                      <div>📞 {library.phone}</div>\n                      <div>🕐 {library.hours}</div>\n                      <div>📋 소장여부: {library.available ? '소장중' : '미소장'}</div>\n                      <div>📝 예약가능: {library.reservable ? '가능' : '불가능'}</div>\n                      <div>🏷️ 청구기호: {library.callNumber}</div>\n                      <div style={{ fontSize: '12px', color: '#666', marginTop: '5px' }}>\n                        💡 청구기호로 도서관에서 책을 찾으실 수 있습니다\n                      </div>\n                      <div style={{ \n                        fontSize: '11px', \n                        color: '#999', \n                        marginTop: '3px',\n                        fontStyle: 'italic'\n                      }}>\n                        📋 실제 소장 현황 및 예약 정보는 도서관정보나루 API 기반입니다\n                      </div>\n                      <div style={{ \n                        fontSize: '10px', \n                        color: '#666', \n                        marginTop: '2px'\n                      }}>\n                        💡 정확한 권수 정보는 해당 도서관에 직접 문의하세요\n                      </div>\n                    </LibraryDetails>\n                  </LibraryItem>\n                ))}\n              </LibraryList>\n            </BookCard>\n          ))}\n        </SearchResults>\n      )}\n    </Container>\n  );\n};\n\nexport default BookSearchSection;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CACtC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,cAAc,CAAEC,iBAAiB,CAAmBC,iBAAiB,KAA0B,wBAAwB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjI,KAAM,CAAAC,SAAS,CAAGT,MAAM,CAACU,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGX,MAAM,CAACY,IAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,WAAW,CAAGb,MAAM,CAACc,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,YAAY,CAAGf,MAAM,CAACgB,MAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,uBAAuB,CAAGjB,MAAM,CAACU,GAAG;AAC1C;AACA,CAAC,CAED,KAAM,CAAAQ,aAAa,CAAGlB,MAAM,CAACU,GAAG;AAChC;AACA,CAAC,CAED,KAAM,CAAAS,QAAQ,CAAGnB,MAAM,CAACU,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAU,SAAS,CAAGpB,MAAM,CAACqB,EAAE;AAC3B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGtB,MAAM,CAACU,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,WAAW,CAAGvB,MAAM,CAACU,GAAG;AAC9B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAc,WAAW,CAAGxB,MAAM,CAACU,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAe,WAAW,CAAGzB,MAAM,CAACU,GAAG;AAC9B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAgB,cAAc,CAAG1B,MAAM,CAACU,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAiB,iBAAiB,CAAG3B,MAAM,CAAC4B,IAA4B;AAC7D;AACA;AACA;AACA;AACA;AACA,gBAAgBC,KAAK,EAAIA,KAAK,CAACC,SAAS,CAAG,SAAS,CAAG,SAAS;AAChE,WAAWD,KAAK,EAAIA,KAAK,CAACC,SAAS,CAAG,SAAS,CAAG,SAAS;AAC3D,sBAAsBD,KAAK,EAAIA,KAAK,CAACC,SAAS,CAAG,SAAS,CAAG,SAAS;AACtE,CAAC,CAED,KAAM,CAAAC,UAAU,CAAG/B,MAAM,CAACU,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAsB,UAAU,CAAGhC,MAAM,CAACU,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAuB,SAAS,CAAGjC,MAAM,CAACU,GAA0B;AACnD;AACA,WAAWmB,KAAK,EAAIA,KAAK,CAACK,OAAO,CAAG,SAAS,CAAG,SAAS;AACzD;AACA;AACA;AACA,gBAAgBL,KAAK,EAAIA,KAAK,CAACK,OAAO,CAAG,SAAS,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}